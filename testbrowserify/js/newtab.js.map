{"version":3,"sources":["js/newtab.js","js/node_modules/browserify/node_modules/browser-pack/_prelude.js","js/js/actions.js","js/js/createCalendar.js","js/js/favorites.js","js/js/newtab.js","js/js/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","triggerModal","modal","$","fadeIn","closeModal","fadeOut","triggerEditMode","sortable","processEditedList","NTInstance","reorderedList","children","processedList","newEntry","title","childNodes","dataset","url","href","bgImg","push","setSetting","loadUserSettings","userTheme","getSetting","userFont","userHover","userBGImg","currentSettings","theme","font","hover","background","setUserSettings","settings","css","not","val","radios","each","el","attr","showInitialLoad","$onboarding","temp","html","setTimeout","hide","setFont","fontName","newFontStack","setHover","hoverName","addClass","removeClass","2","d","Date","month_name","month","getMonth","year","getFullYear","today","getDate","first_date","tmp","toDateString","first_day","substring","day_name","day_no","indexOf","days","table","document","createElement","buildCalendar","tr","c","td","daysOfTheWeek","innerHTML","appendChild","count","classList","add","3","Util","addFavorite","imageUrl","newListEntry","newFavorite","get","done","style","backgroundImage","fail","backgroundSize","backgroundPosition","backgroundRepeat","optDel","append","saveFavorite","entry","currentSaved","savedFavorites","getPopularFavorites","ajax","method","deleteFavorite","delUrl","forEach","item","index","splice","loadSavedFavorites","savedItems","loadPopularFavorites","popFavs","then","res","response","JSON","parse","createPopularFavs","loadDefaultFavorites","getPromise","createDefaultFavs","favorites","list","default_favorites","popular_favorites","match","grep","favHTML","./util.js","4","chrome","extension","getBackgroundPage","editing","Actions","Calendar","Favorites","ready","calendar","runtime","sendMessage","task","firstRun","focus","currentTime","toLocaleTimeString","navigator","language","hour","minute","currentDate","setInterval","on","preventDefault","clickElement","this","modalToOpen","toggleClass","toggle","settingsModal","onBoardingModal","calendarModal","selection","titletoAdd","urltoAdd","imgtoAdd","imgurl","remove","console","log","modalToClose","closest","titleVal","urlVal","addHttp","isValidURL","validateURL","text","show","imageVal","isValidImgURL","newImageURL","change","value","hoverSelected","fontSelected","favorite","parent","linkToDelete","hasClass","./actions.js","./createCalendar.js","./favorites.js","5","newUrl","concat"],"mappings":"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","file":"js/newtab.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// import $ from \"jquery\";\r\n// let NTInstance;\r\n// let init = function(NT) {\r\n//   NTInstance = NT;\r\n// };\r\n  // Prompt user for image to use for bookmark\r\n  // and also the url.  Append to favorites\r\nlet triggerModal = function(modal) {\r\n    $('.lightbox').fadeIn();\r\n    modal.fadeIn();\r\n};\r\n\r\nlet closeModal = function (modal) {\r\n    $('.lightbox').fadeOut();\r\n    modal.fadeOut();\r\n};\r\n\r\nlet triggerEditMode = function () {\r\n    $(\"#favorites\").sortable(\"enable\");\r\n};\r\n\r\nlet processEditedList = function (NTInstance) {\r\n    var reorderedList = $(\"#favorites\").children();\r\n    var processedList = [];\r\n    for (var i = 0; i < reorderedList.length; i++) {\r\n      var newEntry = {\r\n        \"title\": reorderedList[i].childNodes[0].dataset.title,\r\n        \"url\": reorderedList[i].childNodes[0].href,\r\n        \"bgImg\": reorderedList[i].childNodes[0].dataset.bgImg\r\n      };\r\n      processedList.push(newEntry);\r\n    }\r\n    NTInstance.setSetting(\"savedFavorites\", processedList);\r\n    $(\"#favorites\").sortable(\"disable\");\r\n};\r\n\r\nlet loadUserSettings = function(NTInstance) {\r\n    var userTheme = NTInstance.getSetting(\"userTheme\", \"light\");\r\n    var userFont = NTInstance.getSetting(\"userFont\", \"Work Sans\");\r\n    var userHover = NTInstance.getSetting(\"userHover\", \"hoverPop\");\r\n    var userBGImg = NTInstance.getSetting(\"userThemeBG\", null);\r\n    NTInstance.currentSettings = {\r\n      \"theme\" : userTheme,\r\n      \"font\" : userFont,\r\n      \"hover\" : userHover,\r\n      \"background\" : userBGImg\r\n    };\r\n    // console.log(NTInstance.currentSettings);\r\n};\r\nlet setUserSettings = function (settings) {\r\n    if (settings.theme == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n    }\r\n    else if (settings.theme == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n    }\r\n    $(\"*\").not(\"i\").css(\"font-family\", settings.font);\r\n    $(\"select.fontOption\").val(settings.font);\r\n    $(\"select.hoverOption\").val(settings.hover);\r\n    var radios = $(\"input[name=theme-select]\");\r\n    $(radios).each(function(i, el) {\r\n      if($(el).val() === settings.theme)\r\n        $(el).attr(\"checked\", \"checked\");\r\n    });\r\n\r\n    if(settings.background !== null) {\r\n      $(\"body\").css(\"background-image\", \"url(\" + settings.background +\")\");\r\n      $(\"input[name=themeBGImage]\").val(settings.background);\r\n    }\r\n\r\n  };\r\n\r\n  // TO-DO: Could probably be implemented better\r\nlet showInitialLoad = function () {\r\n    var $onboarding = $(\".onboardingModal\");\r\n    var temp = $onboarding.html();\r\n    $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/cubeload.svg'/><p class='onboardGreeting'>Setting up DashTab</p>\");\r\n    setTimeout(function() {\r\n      $onboarding.children().fadeOut(\"slow\");\r\n    }, 3000);\r\n    setTimeout(function() {\r\n      $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/logo.jpg'/ alt='Dashtab Logo'><p class='onboardGreeting'>Welcome to DashTab!</p>\");\r\n    }, 3500);\r\n    setTimeout(function() {\r\n      $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n      // $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n      // $(\".modalWrapper\").fadeOut(\"slow\");\r\n    }, 6000);\r\n    setTimeout(function() {\r\n      // $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n      $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n      // $(\".modalWrapper\").fadeOut(\"slow\");\r\n    }, 6500);\r\n    setTimeout(function() {\r\n      $(\".modalWrapper\").fadeIn(\"slow\");\r\n      // $(\".onboardGreeting\").fadeOut(\"slow\");\r\n    }, 7000);\r\n  };\r\n\r\nlet setFont = function(fontName, NTInstance) {\r\n    let newFontStack = fontName;\r\n    NTInstance.setSetting(\"userFont\", newFontStack);\r\n    $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n};\r\n\r\nlet setHover = function(hoverName, NTInstance) {\r\n  NTInstance.setSetting(\"userHover\", hoverName);\r\n  switch(hoverName) {\r\n\r\n    case \"hoverPop\":\r\n    $(\".favorite\").addClass(\"hoverPop\").removeClass(\"hoverNone hoverHighlight\");\r\n    break;\r\n\r\n    case \"hoverHighlight\":\r\n    $(\".favorite\").addClass(\"hoverHighlight\").removeClass(\"hoverNone hoverPop\");\r\n    break;\r\n\r\n    case \"hoverNone\":\r\n    $(\".favorite\").addClass(\"hoverNone\").removeClass(\"hoverPop hoverHighlight\");\r\n    break;\r\n  }\r\n  //$(\".favorite\").addClass(hoverName).removeClass(\"hoverNone hoverHighlight\");\r\n};\r\nmodule.exports = {\r\n  triggerModal,\r\n  closeModal,\r\n  triggerEditMode,\r\n  processEditedList,\r\n  loadUserSettings,\r\n  setUserSettings,\r\n  showInitialLoad,\r\n  setFont,\r\n  setHover\r\n};\r\n\n},{}],2:[function(require,module,exports){\n// Calendar\r\nlet d = new Date();\r\nlet month_name = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\nlet month = d.getMonth(); // 0 - 11\r\nlet year = d.getFullYear(); // 2016\r\nlet today = d.getDate();\r\nlet first_date = month_name[month] + \" \" + 1 + \" \" + year;\r\nlet tmp = new Date(first_date).toDateString();\r\nlet first_day = tmp.substring(0, 3);\r\nlet day_name = ['Sun', 'Mon', \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\nlet day_no = day_name.indexOf(first_day);\r\nlet days = new Date(year, month+1, 0).getDate();\r\nlet table = document.createElement(\"table\");\r\nlet tr = document.createElement(\"tr\");\r\n\r\nlet buildCalendar = function () {\r\n\r\nvar tr = document.createElement(\"tr\");\r\n// Row for day letters\r\nfor(var c = 0; c <= 6; c++) {\r\n  var td = document.createElement(\"td\");\r\n  var daysOfTheWeek = [\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];\r\n  td.innerHTML = daysOfTheWeek[c];\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// Row for blank spaces\r\ntr = document.createElement(\"tr\");\r\nfor(c = 0;c <= 6; c++) {\r\n  if(c === day_no) {\r\n    break;\r\n  }\r\n  var td = document.createElement(\"td\");\r\n  td.innerHTML = \"\";\r\n  tr.appendChild(td);\r\n}\r\n\r\n// Start counting days of the month\r\nvar count = 1;\r\nfor(; c <=6; c++) {\r\n  // console.log(c);\r\n  var td = document.createElement(\"td\");\r\n\r\n  td.innerHTML = \"<span>\" + count + \"</span>\";\r\n  //console.log(count, today);\r\n  if(count === today){\r\n    td.classList.add(\"currentDay\");\r\n  }\r\n\r\n  count++;\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// rest of the date rows\r\nfor(var r=3; r<= 6; r++) {\r\n  tr = document.createElement(\"tr\");\r\n  for(var c = 0; c <= 6;c++) {\r\n    if(count > days) {\r\n      table.appendChild(tr);\r\n      return table;\r\n    }\r\n    var td = document.createElement(\"td\");\r\n    td.innerHTML = \"<span>\" + count + \"</span>\";\r\n    if(count === today){\r\n      td.classList.add(\"currentDay\");\r\n    }\r\n    count++;\r\n    tr.appendChild(td);\r\n  }\r\n  table.appendChild(tr);\r\n}\r\n}\r\n\r\n//var calendar = buildCalendar();\r\nmodule.exports = {\r\n  buildCalendar,\r\n  month_name,\r\n  month,\r\n  year\r\n};\r\n\n},{}],3:[function(require,module,exports){\nconst Util = require(\"./util.js\");\r\n// let NTInstance;\r\n// let init = function(NT) {\r\n//   NTInstance = NT;\r\n// };\r\n// Add a new favorite to the favorites grid\r\nlet addFavorite = function (title, url, imageUrl, NTInstance) {\r\n    var newListEntry = document.createElement(\"LI\");\r\n    var newFavorite = document.createElement(\"A\");\r\n    newFavorite.href = url;\r\n    // console.log(imageExists(imageUrl));\r\n    $.get(imageUrl)\r\n      .done(function() {\r\n        newFavorite.style.backgroundImage = \"url(\" + imageUrl + \")\";\r\n      }).fail(function() {\r\n        newFavorite.style.backgroundImage = \"url('/newtab/images/placeholder.png')\";\r\n    });\r\n    newFavorite.style.backgroundSize = \"cover\";\r\n    newFavorite.style.backgroundPosition = \"center center\";\r\n    newFavorite.style.backgroundRepeat = \"no-repeat\";\r\n    newFavorite.classList.add(\"favorite\", NTInstance.currentSettings.hover);\r\n    newFavorite.dataset.title = title;\r\n    newFavorite.dataset.bgImg = imageUrl;\r\n    var optDel = document.createElement(\"I\");\r\n    optDel.classList.add(\"fa\", \"fa-trash-o\", \"fa-lg\", \"fa-fw\", \"optDel\");\r\n    // var optEdit = document.createElement(\"I\");\r\n    // optEdit.classList.add(\"fa\", \"fa-pencil\", \"fa-lg\", \"fa-fw\", \"optEdit\");\r\n    newFavorite.appendChild(optDel);\r\n    // newFavorite.appendChild(optEdit);\r\n    newListEntry.appendChild(newFavorite);\r\n    $(\"#favorites\").append(newListEntry);\r\n    $(\".favorite\").children().hide();\r\n};\r\n\r\n\r\n  // Save favorite to local storage\r\nlet saveFavorite = function(entry, NTInstance) {\r\n    var currentSaved = [];\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n      currentSaved = savedFavorites;\r\n    }\r\n    currentSaved.push(entry);\r\n    NTInstance.setSetting(\"savedFavorites\" , currentSaved);\r\n    addFavorite(entry.title, entry.url, entry.bgImg, NTInstance);\r\n    $(\"#inputUrl\").val(\"\");\r\n    $(\"#inputImage\").val(\"\");\r\n  };\r\n\r\nlet getPopularFavorites = function () {\r\n    return $.ajax({\r\n      url: \"./popularFavs.json\",\r\n      method: \"GET\"\r\n    });\r\n};\r\n\r\nlet deleteFavorite = function (delUrl, NTInstance) {\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n    savedFavorites.forEach(function(item, index) {\r\n      if(item.url === delUrl) {\r\n        savedFavorites.splice(index, 1);\r\n      }\r\n\r\n    });\r\n    NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n    }\r\n};\r\n\r\n  // Load saved favorites onload\r\nlet loadSavedFavorites = function(NTInstance) {\r\n    var savedItems = [];\r\n      var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n      if(savedFavorites !== null){\r\n      savedItems = savedFavorites;\r\n      savedItems.forEach(function(item) {\r\n        addFavorite(item.title, item.url, item.bgImg, NTInstance);\r\n      });\r\n      }\r\n};\r\n\r\nlet loadPopularFavorites = function (NTInstance) {\r\n    var popFavs = getPopularFavorites();\r\n    popFavs.then(function(res) {\r\n      var response = JSON.parse(res);\r\n      createPopularFavs(response, NTInstance);\r\n    });\r\n};\r\nlet loadDefaultFavorites = function (NTInstance) {\r\n    var popFavs = Util.getPromise(\"/newtab/defaultFavs.json\");\r\n    popFavs.then(function(res) {\r\n      var response = JSON.parse(res);\r\n      createDefaultFavs(response, NTInstance);\r\n    });\r\n};\r\n\r\nlet createDefaultFavs = function (favorites, NTInstance) {\r\n    var list = favorites.default_favorites;\r\n    // console.log(list);\r\n    for(var i = 0; i < list.length; i++){\r\n      var entry = {\r\n        \"title\" : list[i].title,\r\n        \"url\" : list[i].url,\r\n        \"bgImg\" : list[i].bgImg,\r\n      };\r\n      // console.log(entry);\r\n      saveFavorite(entry, NTInstance);\r\n    }\r\n};\r\n\r\nlet createPopularFavs = function (favorites, NTInstance) {\r\n    // console.log(NTInstance, favorites);\r\n    var list = favorites.popular_favorites;\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    var match = [];\r\n    //console.log(NTInstance);\r\n    for(var i = 0; i < list.length; i++){\r\n      if(savedFavorites !== null){\r\n      match = $.grep(savedFavorites, function(e) {\r\n        return e.url === list[i].url;\r\n      });\r\n      }\r\n\r\n      if(match.length === 0){\r\n        var favHTML = \"<a href='#' class='popFav' data-title=\" + list[i].title + \" data-url=\" + list[i].url + \" data-imgurl=\" + list[i].bgImg +\">\" + list[i].title + \"</a>\";\r\n        $(\".popularFavs\").append(favHTML);\r\n      }\r\n    }\r\n};\r\n\r\nmodule.exports = {\r\n\r\n  addFavorite,\r\n  saveFavorite,\r\n  getPopularFavorites,\r\n  deleteFavorite,\r\n  loadSavedFavorites,\r\n  loadPopularFavorites,\r\n  loadDefaultFavorites,\r\n  createDefaultFavs,\r\n  createPopularFavs\r\n};\r\n\n},{\"./util.js\":5}],4:[function(require,module,exports){\n// import $ from \"jquery\";\r\nvar background = chrome.extension.getBackgroundPage();\r\nvar NTInstance = background.NTInstance;\r\nNTInstance.editing = false;\r\nNTInstance.currentSettings = {\r\n  \"theme\" : \"light\",\r\n  \"font\" : \"Work Sans\",\r\n  \"hover\" : \"hoverPop\",\r\n  \"background\" : null\r\n};\r\n\r\nconst Actions = require(\"./actions.js\");\r\nconst Calendar = require(\"./createCalendar.js\");\r\nconst Favorites = require(\"./favorites.js\");\r\nconst Util = require(\"./util.js\");\r\n$(document).ready(function() {\r\n\r\n  Actions.loadUserSettings(NTInstance);\r\n  Actions.setUserSettings(NTInstance.currentSettings);\r\n  Favorites.loadSavedFavorites(NTInstance);\r\n  Favorites.loadPopularFavorites(NTInstance);\r\n  var calendar = Calendar.buildCalendar();\r\n\r\n  $(\".calendar-head\").html(\"<span>\" + Calendar.month_name[Calendar.month] + \" \" + Calendar.year + \"</span\");\r\n  $(\".calendar\").append(calendar);\r\n  $(\"#favorites\").sortable();\r\n  $(\"#favorites\").sortable(\"disable\");\r\n\r\n  chrome.runtime.sendMessage({task: \"checkFirstRun\"}, function(res) {\r\n    if(res.firstRun){\r\n      Actions.showInitialLoad();\r\n      Favorites.loadDefaultFavorites(NTInstance);\r\n      Actions.triggerModal($(\".onboardingModal\"));\r\n      $(\"#obInputTitle\").focus();\r\n    }\r\n\r\n    // Hide edit icons\r\n    $(\".favorite\").children().hide();\r\n  });\r\n\r\n  // Refresh time every second\r\n  var currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n  $('#time').html(currentTime);\r\n  var currentDate = new Date().toDateString();\r\n  $('#date').html(currentDate);\r\n  setInterval(function(){\r\n    currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n    $('#time').html(currentTime);\r\n  }, 1000);\r\n\r\n  /*\r\n    Handlers for the top right main user actions menu\r\n  */\r\n  $(document).on(\"click\", \".userAction\", function(e) {\r\n     e.preventDefault();\r\n     var clickElement = $(this).attr('id');\r\n     //console.log(clickElement);\r\n     switch(clickElement) {\r\n        case \"addFavorite\":\r\n          if($(\".addModal .popularFavs\").children().length === 0){\r\n            $(\".addExtra\").hide();\r\n          }\r\n          var modalToOpen = $(\".addModal\");\r\n          Actions.triggerModal(modalToOpen);\r\n          $(\"#inputTitle\").focus();\r\n          break;\r\n\r\n        case 'editMode':\r\n          e.preventDefault();\r\n          NTInstance.editing = !NTInstance.editing;\r\n          $(\".favorite\").toggleClass(\"editing\");\r\n          $(\".favorite\").children().toggle();\r\n          if(NTInstance.editing){\r\n            Actions.triggerEditMode();\r\n          }\r\n          else{\r\n            Actions.processEditedList(NTInstance);\r\n          }\r\n          break;\r\n\r\n        case 'openSettings':\r\n          e.preventDefault();\r\n          var settingsModal = $(\".settingsModal\");\r\n          Actions.triggerModal(settingsModal);\r\n\r\n          break;\r\n\r\n        case 'openOnboarding':\r\n          e.preventDefault();\r\n          var onBoardingModal = $(\".onboardingModal\");\r\n          Actions.triggerModal(onBoardingModal);\r\n          break;\r\n\r\n        case 'openCalendar':\r\n          e.preventDefault();\r\n          var calendarModal = $(\".calendarModal\");\r\n          Actions.triggerModal(calendarModal);\r\n          break;\r\n     }\r\n  });\r\n\r\n  /*\r\n    Handler for the suggested favorites in the Add New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".popFav\", function(e){\r\n    e.preventDefault();\r\n    var selection = $(this)[0];\r\n    var titletoAdd = selection.dataset.title;\r\n    var urltoAdd = selection.dataset.url;\r\n    var imgtoAdd = selection.dataset.imgurl;\r\n\r\n    var newEntry = {\r\n      \"title\" : titletoAdd,\r\n      \"url\" : urltoAdd,\r\n      \"bgImg\" : imgtoAdd\r\n    };\r\n    Favorites.saveFavorite(newEntry, NTInstance);\r\n    $(this).remove();\r\n    console.log($(\".addModal .popularFavs\").children().length);\r\n    console.log($(\".onboardingModal .popularFavs\").children().length);\r\n    if($(\".addModal .popularFavs\").children().length === 0 || $(\".onboardingModal .popularFavs\").children().length === 0) {\r\n      $(\".addExtra\").hide();\r\n    }\r\n  });\r\n/*\r\n  Handler for close button\r\n*/\r\n  $(document).on(\"click\", \".closeBtn\", function(e) {\r\n    e.preventDefault();\r\n    var modalToClose = $(this).closest(\".modal\");\r\n    Actions.closeModal(modalToClose);\r\n  });\r\n\r\n  /*\r\n    Handler for the add button on the Add a New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".addBtn\",  function(e){\r\n    e.preventDefault();\r\n    var titleVal = $(\"#inputTitle\").val();\r\n    var urlVal = $(\"#inputUrl\").val();\r\n    urlVal = Util.addHttp(urlVal);\r\n    var isValidURL = Util.validateURL(urlVal);\r\n\r\n    if(!isValidURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid URL\").show();\r\n    }\r\n    var imageVal = $(\"#inputImage\").val();\r\n    imageVal = Util.addHttp(imageVal);\r\n    var isValidImgURL = Util.validateURL(imageVal);\r\n    if(!isValidImgURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid Image URL\").show();\r\n    }\r\n    if(!isValidURL && !isValidImgURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid URL & Image URL\").show();\r\n    }\r\n    if((titleVal !== \"\") && (urlVal !== \"\" && isValidURL) && (imageVal !== \"\" && isValidImgURL)){\r\n      var newEntry = {\r\n        \"title\" : titleVal,\r\n        \"url\" : urlVal,\r\n        \"bgImg\" : imageVal\r\n      };\r\n      Favorites.saveFavorite(newEntry);\r\n\r\n      if ($(\".modal\").length !== null) {\r\n        Actions.closeModal($(\".modal\"));\r\n      }\r\n      $(\"#addFormError\").hide();\r\n    }\r\n    else {\r\n      $(\"#addFormError\").show();\r\n    }\r\n  });\r\n  /*\r\n    Handler for the accept changes in edit favorite menu\r\n  */\r\n  // $(document).on(\"click\", \".editBtn\", function(e){\r\n  //   var itemToEdit = NTInstance.editedItem;\r\n  //   console.log(itemToEdit);\r\n  //   e.preventDefault();\r\n  //   var titleVal = itemToEdit[0].dataset.title;\r\n  //   var urlVal = $(\"#editInputUrl\").val();\r\n  //   var imageVal = $(\"#editInputImage\").val();\r\n  //   var newEntry = {\r\n  //     \"title\" : titleVal,\r\n  //     \"url\" : urlVal,\r\n  //     \"bgImg\" : imageVal\r\n  //   };\r\n  //   saveFavorite(newEntry);\r\n  //\r\n  //   var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  //   for (var i = 0; i < savedFavorites.length; i++) {\r\n  //     if(savedFavorites[i].url === itemToEdit.url) {\r\n  //       savedFavorites.splice(i, 1);\r\n  //     }\r\n  //   }\r\n  //   NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n  //   if ($(\".modal\").length !== null) {\r\n  //     closeModal($(\".modal\"));\r\n  //   }\r\n  //   $(itemToEdit).remove();\r\n  //   NTInstance.editedItem = null;\r\n  // });\r\n\r\n\r\n  $(document).on(\"click\", \".updateBtn\", function() {\r\n    var newImageURL = $(\"input[name=themeBGImage]\").val();\r\n    var isValidURL = Util.validateURL(newImageURL);\r\n    if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", newImageURL);\r\n      $(\"body\").css(\"background-image\", \"url('\" + newImageURL + \"')\");\r\n    }\r\n    else {\r\n      $(\".bgURLError\").show();\r\n    }\r\n  });\r\n  $(document).on(\"click\", \".removeBtn\", function() {\r\n    $(\"input[name=themeBGImage]\").val(\"\");\r\n    // var isValidURL = validateURL(newImageURL);\r\n    // if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", null);\r\n      $(\"body\").css(\"background-image\", \"none\");\r\n      $(\".bgURLError\").hide();\r\n    // }\r\n  });\r\n\r\n  $('input[type=radio][name=theme-select]').change(function() {\r\n    NTInstance.setSetting(\"userTheme\", this.value);\r\n    if (this.value == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n\r\n    }\r\n    else if (this.value == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n\r\n    }\r\n  });\r\n\r\n\r\n  $(document).on(\"change\", \".hoverOption\", function() {\r\n    var hoverSelected = $(this).val();\r\n    Actions.setHover(hoverSelected, NTInstance);\r\n  });\r\n  $(document).on(\"change\", \".fontOption\", function() {\r\n    var fontSelected = $(this).val();\r\n    Actions.setFont(fontSelected, NTInstance);\r\n  });\r\n\r\n  /*\r\n    Handlers for edit mode options on each of the favorites\r\n  */\r\n  $(document).on(\"click\", \".optDel\", function(e) {\r\n    e.preventDefault();\r\n    var favorite = $(this).parent();\r\n    var linkToDelete = favorite.attr(\"href\");\r\n    Favorites.deleteFavorite(linkToDelete, NTInstance);\r\n    $(this).parent().remove();\r\n  });\r\n  // $(document).on(\"click\", \".optEdit\", function(e) {\r\n  //   e.preventDefault();\r\n  //   // Open Edit Modal\r\n  //   NTInstance.editedItem = $(this).parent();\r\n  //   var favorite = $(this).parent();\r\n  //   $(\".editedItem\").text(favorite[0].dataset.title);\r\n  //   favorite.addClass(\"changingVals\");\r\n  //   triggerModal($(\".editModal\"));\r\n  //   $(\"#editInputUrl\").focus();\r\n  //\r\n  // });\r\n  $(document).on(\"click\", \".favorite\", function(e) {\r\n    if($(this).hasClass(\"editing\"))\r\n      e.preventDefault();\r\n  });\r\n});\r\n\n},{\"./actions.js\":1,\"./createCalendar.js\":2,\"./favorites.js\":3,\"./util.js\":5}],5:[function(require,module,exports){\nlet getPromise = function(url) {\r\n  return $.ajax({\r\n    url: url,\r\n    method: \"GET\"\r\n  });\r\n};\r\n\r\nlet validateURL = function (url) {\r\n  // var regex = \"\";\r\n  // console.log(typeof regex, url.match(regex));\r\n  if(url.match(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/) === null){\r\n    return false;\r\n  }\r\n  else return true;\r\n};\r\n\r\nlet addHttp = function (url) {\r\n  var newUrl;\r\n  if(url.match(/^(https?:\\/\\/)/) === null){\r\n    var addHttp = \"http://\";\r\n    newUrl = addHttp.concat(url);\r\n    return newUrl;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nmodule.exports = {\r\n  getPromise,\r\n  validateURL,\r\n  addHttp\r\n};\r\n\n},{}]},{},[4])\n\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// import $ from \"jquery\";\r\n// let NTInstance;\r\n// let init = function(NT) {\r\n//   NTInstance = NT;\r\n// };\r\n  // Prompt user for image to use for bookmark\r\n  // and also the url.  Append to favorites\r\nlet triggerModal = function(modal) {\r\n    $('.lightbox').fadeIn();\r\n    modal.fadeIn();\r\n};\r\n\r\nlet closeModal = function (modal) {\r\n    $('.lightbox').fadeOut();\r\n    modal.fadeOut();\r\n};\r\n\r\nlet triggerEditMode = function () {\r\n    $(\"#favorites\").sortable(\"enable\");\r\n};\r\n\r\nlet processEditedList = function (NTInstance) {\r\n    var reorderedList = $(\"#favorites\").children();\r\n    var processedList = [];\r\n    for (var i = 0; i < reorderedList.length; i++) {\r\n      var newEntry = {\r\n        \"title\": reorderedList[i].childNodes[0].dataset.title,\r\n        \"url\": reorderedList[i].childNodes[0].href,\r\n        \"bgImg\": reorderedList[i].childNodes[0].dataset.bgImg\r\n      };\r\n      processedList.push(newEntry);\r\n    }\r\n    NTInstance.setSetting(\"savedFavorites\", processedList);\r\n    $(\"#favorites\").sortable(\"disable\");\r\n};\r\n\r\nlet loadUserSettings = function(NTInstance) {\r\n    var userTheme = NTInstance.getSetting(\"userTheme\", \"light\");\r\n    var userFont = NTInstance.getSetting(\"userFont\", \"Work Sans\");\r\n    var userHover = NTInstance.getSetting(\"userHover\", \"hoverPop\");\r\n    var userBGImg = NTInstance.getSetting(\"userThemeBG\", null);\r\n    NTInstance.currentSettings = {\r\n      \"theme\" : userTheme,\r\n      \"font\" : userFont,\r\n      \"hover\" : userHover,\r\n      \"background\" : userBGImg\r\n    };\r\n    // console.log(NTInstance.currentSettings);\r\n};\r\nlet setUserSettings = function (settings) {\r\n    if (settings.theme == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n    }\r\n    else if (settings.theme == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n    }\r\n    $(\"*\").not(\"i\").css(\"font-family\", settings.font);\r\n    $(\"select.fontOption\").val(settings.font);\r\n    $(\"select.hoverOption\").val(settings.hover);\r\n    var radios = $(\"input[name=theme-select]\");\r\n    $(radios).each(function(i, el) {\r\n      if($(el).val() === settings.theme)\r\n        $(el).attr(\"checked\", \"checked\");\r\n    });\r\n\r\n    if(settings.background !== null) {\r\n      $(\"body\").css(\"background-image\", \"url(\" + settings.background +\")\");\r\n      $(\"input[name=themeBGImage]\").val(settings.background);\r\n    }\r\n\r\n  };\r\n\r\n  // TO-DO: Could probably be implemented better\r\nlet showInitialLoad = function () {\r\n    var $onboarding = $(\".onboardingModal\");\r\n    var temp = $onboarding.html();\r\n    $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/cubeload.svg'/><p class='onboardGreeting'>Setting up DashTab</p>\");\r\n    setTimeout(function() {\r\n      $onboarding.children().fadeOut(\"slow\");\r\n    }, 3000);\r\n    setTimeout(function() {\r\n      $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/logo.jpg'/ alt='Dashtab Logo'><p class='onboardGreeting'>Welcome to DashTab!</p>\");\r\n    }, 3500);\r\n    setTimeout(function() {\r\n      $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n      // $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n      // $(\".modalWrapper\").fadeOut(\"slow\");\r\n    }, 6000);\r\n    setTimeout(function() {\r\n      // $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n      $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n      // $(\".modalWrapper\").fadeOut(\"slow\");\r\n    }, 6500);\r\n    setTimeout(function() {\r\n      $(\".modalWrapper\").fadeIn(\"slow\");\r\n      // $(\".onboardGreeting\").fadeOut(\"slow\");\r\n    }, 7000);\r\n  };\r\n\r\nlet setFont = function(fontName, NTInstance) {\r\n    let newFontStack = fontName;\r\n    NTInstance.setSetting(\"userFont\", newFontStack);\r\n    $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n};\r\n\r\nlet setHover = function(hoverName, NTInstance) {\r\n  NTInstance.setSetting(\"userHover\", hoverName);\r\n  switch(hoverName) {\r\n\r\n    case \"hoverPop\":\r\n    $(\".favorite\").addClass(\"hoverPop\").removeClass(\"hoverNone hoverHighlight\");\r\n    break;\r\n\r\n    case \"hoverHighlight\":\r\n    $(\".favorite\").addClass(\"hoverHighlight\").removeClass(\"hoverNone hoverPop\");\r\n    break;\r\n\r\n    case \"hoverNone\":\r\n    $(\".favorite\").addClass(\"hoverNone\").removeClass(\"hoverPop hoverHighlight\");\r\n    break;\r\n  }\r\n  //$(\".favorite\").addClass(hoverName).removeClass(\"hoverNone hoverHighlight\");\r\n};\r\nmodule.exports = {\r\n  triggerModal,\r\n  closeModal,\r\n  triggerEditMode,\r\n  processEditedList,\r\n  loadUserSettings,\r\n  setUserSettings,\r\n  showInitialLoad,\r\n  setFont,\r\n  setHover\r\n};\r\n","// Calendar\r\nlet d = new Date();\r\nlet month_name = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\nlet month = d.getMonth(); // 0 - 11\r\nlet year = d.getFullYear(); // 2016\r\nlet today = d.getDate();\r\nlet first_date = month_name[month] + \" \" + 1 + \" \" + year;\r\nlet tmp = new Date(first_date).toDateString();\r\nlet first_day = tmp.substring(0, 3);\r\nlet day_name = ['Sun', 'Mon', \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\nlet day_no = day_name.indexOf(first_day);\r\nlet days = new Date(year, month+1, 0).getDate();\r\nlet table = document.createElement(\"table\");\r\nlet tr = document.createElement(\"tr\");\r\n\r\nlet buildCalendar = function () {\r\n\r\nvar tr = document.createElement(\"tr\");\r\n// Row for day letters\r\nfor(var c = 0; c <= 6; c++) {\r\n  var td = document.createElement(\"td\");\r\n  var daysOfTheWeek = [\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];\r\n  td.innerHTML = daysOfTheWeek[c];\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// Row for blank spaces\r\ntr = document.createElement(\"tr\");\r\nfor(c = 0;c <= 6; c++) {\r\n  if(c === day_no) {\r\n    break;\r\n  }\r\n  var td = document.createElement(\"td\");\r\n  td.innerHTML = \"\";\r\n  tr.appendChild(td);\r\n}\r\n\r\n// Start counting days of the month\r\nvar count = 1;\r\nfor(; c <=6; c++) {\r\n  // console.log(c);\r\n  var td = document.createElement(\"td\");\r\n\r\n  td.innerHTML = \"<span>\" + count + \"</span>\";\r\n  //console.log(count, today);\r\n  if(count === today){\r\n    td.classList.add(\"currentDay\");\r\n  }\r\n\r\n  count++;\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// rest of the date rows\r\nfor(var r=3; r<= 6; r++) {\r\n  tr = document.createElement(\"tr\");\r\n  for(var c = 0; c <= 6;c++) {\r\n    if(count > days) {\r\n      table.appendChild(tr);\r\n      return table;\r\n    }\r\n    var td = document.createElement(\"td\");\r\n    td.innerHTML = \"<span>\" + count + \"</span>\";\r\n    if(count === today){\r\n      td.classList.add(\"currentDay\");\r\n    }\r\n    count++;\r\n    tr.appendChild(td);\r\n  }\r\n  table.appendChild(tr);\r\n}\r\n}\r\n\r\n//var calendar = buildCalendar();\r\nmodule.exports = {\r\n  buildCalendar,\r\n  month_name,\r\n  month,\r\n  year\r\n};\r\n","const Util = require(\"./util.js\");\r\n// let NTInstance;\r\n// let init = function(NT) {\r\n//   NTInstance = NT;\r\n// };\r\n// Add a new favorite to the favorites grid\r\nlet addFavorite = function (title, url, imageUrl, NTInstance) {\r\n    var newListEntry = document.createElement(\"LI\");\r\n    var newFavorite = document.createElement(\"A\");\r\n    newFavorite.href = url;\r\n    // console.log(imageExists(imageUrl));\r\n    $.get(imageUrl)\r\n      .done(function() {\r\n        newFavorite.style.backgroundImage = \"url(\" + imageUrl + \")\";\r\n      }).fail(function() {\r\n        newFavorite.style.backgroundImage = \"url('/newtab/images/placeholder.png')\";\r\n    });\r\n    newFavorite.style.backgroundSize = \"cover\";\r\n    newFavorite.style.backgroundPosition = \"center center\";\r\n    newFavorite.style.backgroundRepeat = \"no-repeat\";\r\n    newFavorite.classList.add(\"favorite\", NTInstance.currentSettings.hover);\r\n    newFavorite.dataset.title = title;\r\n    newFavorite.dataset.bgImg = imageUrl;\r\n    var optDel = document.createElement(\"I\");\r\n    optDel.classList.add(\"fa\", \"fa-trash-o\", \"fa-lg\", \"fa-fw\", \"optDel\");\r\n    // var optEdit = document.createElement(\"I\");\r\n    // optEdit.classList.add(\"fa\", \"fa-pencil\", \"fa-lg\", \"fa-fw\", \"optEdit\");\r\n    newFavorite.appendChild(optDel);\r\n    // newFavorite.appendChild(optEdit);\r\n    newListEntry.appendChild(newFavorite);\r\n    $(\"#favorites\").append(newListEntry);\r\n    $(\".favorite\").children().hide();\r\n};\r\n\r\n\r\n  // Save favorite to local storage\r\nlet saveFavorite = function(entry, NTInstance) {\r\n    var currentSaved = [];\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n      currentSaved = savedFavorites;\r\n    }\r\n    currentSaved.push(entry);\r\n    NTInstance.setSetting(\"savedFavorites\" , currentSaved);\r\n    addFavorite(entry.title, entry.url, entry.bgImg, NTInstance);\r\n    $(\"#inputUrl\").val(\"\");\r\n    $(\"#inputImage\").val(\"\");\r\n  };\r\n\r\nlet getPopularFavorites = function () {\r\n    return $.ajax({\r\n      url: \"./popularFavs.json\",\r\n      method: \"GET\"\r\n    });\r\n};\r\n\r\nlet deleteFavorite = function (delUrl, NTInstance) {\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n    savedFavorites.forEach(function(item, index) {\r\n      if(item.url === delUrl) {\r\n        savedFavorites.splice(index, 1);\r\n      }\r\n\r\n    });\r\n    NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n    }\r\n};\r\n\r\n  // Load saved favorites onload\r\nlet loadSavedFavorites = function(NTInstance) {\r\n    var savedItems = [];\r\n      var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n      if(savedFavorites !== null){\r\n      savedItems = savedFavorites;\r\n      savedItems.forEach(function(item) {\r\n        addFavorite(item.title, item.url, item.bgImg, NTInstance);\r\n      });\r\n      }\r\n};\r\n\r\nlet loadPopularFavorites = function (NTInstance) {\r\n    var popFavs = getPopularFavorites();\r\n    popFavs.then(function(res) {\r\n      var response = JSON.parse(res);\r\n      createPopularFavs(response, NTInstance);\r\n    });\r\n};\r\nlet loadDefaultFavorites = function (NTInstance) {\r\n    var popFavs = Util.getPromise(\"/newtab/defaultFavs.json\");\r\n    popFavs.then(function(res) {\r\n      var response = JSON.parse(res);\r\n      createDefaultFavs(response, NTInstance);\r\n    });\r\n};\r\n\r\nlet createDefaultFavs = function (favorites, NTInstance) {\r\n    var list = favorites.default_favorites;\r\n    // console.log(list);\r\n    for(var i = 0; i < list.length; i++){\r\n      var entry = {\r\n        \"title\" : list[i].title,\r\n        \"url\" : list[i].url,\r\n        \"bgImg\" : list[i].bgImg,\r\n      };\r\n      // console.log(entry);\r\n      saveFavorite(entry, NTInstance);\r\n    }\r\n};\r\n\r\nlet createPopularFavs = function (favorites, NTInstance) {\r\n    // console.log(NTInstance, favorites);\r\n    var list = favorites.popular_favorites;\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    var match = [];\r\n    //console.log(NTInstance);\r\n    for(var i = 0; i < list.length; i++){\r\n      if(savedFavorites !== null){\r\n      match = $.grep(savedFavorites, function(e) {\r\n        return e.url === list[i].url;\r\n      });\r\n      }\r\n\r\n      if(match.length === 0){\r\n        var favHTML = \"<a href='#' class='popFav' data-title=\" + list[i].title + \" data-url=\" + list[i].url + \" data-imgurl=\" + list[i].bgImg +\">\" + list[i].title + \"</a>\";\r\n        $(\".popularFavs\").append(favHTML);\r\n      }\r\n    }\r\n};\r\n\r\nmodule.exports = {\r\n\r\n  addFavorite,\r\n  saveFavorite,\r\n  getPopularFavorites,\r\n  deleteFavorite,\r\n  loadSavedFavorites,\r\n  loadPopularFavorites,\r\n  loadDefaultFavorites,\r\n  createDefaultFavs,\r\n  createPopularFavs\r\n};\r\n","// import $ from \"jquery\";\r\nvar background = chrome.extension.getBackgroundPage();\r\nvar NTInstance = background.NTInstance;\r\nNTInstance.editing = false;\r\nNTInstance.currentSettings = {\r\n  \"theme\" : \"light\",\r\n  \"font\" : \"Work Sans\",\r\n  \"hover\" : \"hoverPop\",\r\n  \"background\" : null\r\n};\r\n\r\nconst Actions = require(\"./actions.js\");\r\nconst Calendar = require(\"./createCalendar.js\");\r\nconst Favorites = require(\"./favorites.js\");\r\nconst Util = require(\"./util.js\");\r\n$(document).ready(function() {\r\n\r\n  Actions.loadUserSettings(NTInstance);\r\n  Actions.setUserSettings(NTInstance.currentSettings);\r\n  Favorites.loadSavedFavorites(NTInstance);\r\n  Favorites.loadPopularFavorites(NTInstance);\r\n  var calendar = Calendar.buildCalendar();\r\n\r\n  $(\".calendar-head\").html(\"<span>\" + Calendar.month_name[Calendar.month] + \" \" + Calendar.year + \"</span\");\r\n  $(\".calendar\").append(calendar);\r\n  $(\"#favorites\").sortable();\r\n  $(\"#favorites\").sortable(\"disable\");\r\n\r\n  chrome.runtime.sendMessage({task: \"checkFirstRun\"}, function(res) {\r\n    if(res.firstRun){\r\n      Actions.showInitialLoad();\r\n      Favorites.loadDefaultFavorites(NTInstance);\r\n      Actions.triggerModal($(\".onboardingModal\"));\r\n      $(\"#obInputTitle\").focus();\r\n    }\r\n\r\n    // Hide edit icons\r\n    $(\".favorite\").children().hide();\r\n  });\r\n\r\n  // Refresh time every second\r\n  var currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n  $('#time').html(currentTime);\r\n  var currentDate = new Date().toDateString();\r\n  $('#date').html(currentDate);\r\n  setInterval(function(){\r\n    currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n    $('#time').html(currentTime);\r\n  }, 1000);\r\n\r\n  /*\r\n    Handlers for the top right main user actions menu\r\n  */\r\n  $(document).on(\"click\", \".userAction\", function(e) {\r\n     e.preventDefault();\r\n     var clickElement = $(this).attr('id');\r\n     //console.log(clickElement);\r\n     switch(clickElement) {\r\n        case \"addFavorite\":\r\n          if($(\".addModal .popularFavs\").children().length === 0){\r\n            $(\".addExtra\").hide();\r\n          }\r\n          var modalToOpen = $(\".addModal\");\r\n          Actions.triggerModal(modalToOpen);\r\n          $(\"#inputTitle\").focus();\r\n          break;\r\n\r\n        case 'editMode':\r\n          e.preventDefault();\r\n          NTInstance.editing = !NTInstance.editing;\r\n          $(\".favorite\").toggleClass(\"editing\");\r\n          $(\".favorite\").children().toggle();\r\n          if(NTInstance.editing){\r\n            Actions.triggerEditMode();\r\n          }\r\n          else{\r\n            Actions.processEditedList(NTInstance);\r\n          }\r\n          break;\r\n\r\n        case 'openSettings':\r\n          e.preventDefault();\r\n          var settingsModal = $(\".settingsModal\");\r\n          Actions.triggerModal(settingsModal);\r\n\r\n          break;\r\n\r\n        case 'openOnboarding':\r\n          e.preventDefault();\r\n          var onBoardingModal = $(\".onboardingModal\");\r\n          Actions.triggerModal(onBoardingModal);\r\n          break;\r\n\r\n        case 'openCalendar':\r\n          e.preventDefault();\r\n          var calendarModal = $(\".calendarModal\");\r\n          Actions.triggerModal(calendarModal);\r\n          break;\r\n     }\r\n  });\r\n\r\n  /*\r\n    Handler for the suggested favorites in the Add New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".popFav\", function(e){\r\n    e.preventDefault();\r\n    var selection = $(this)[0];\r\n    var titletoAdd = selection.dataset.title;\r\n    var urltoAdd = selection.dataset.url;\r\n    var imgtoAdd = selection.dataset.imgurl;\r\n\r\n    var newEntry = {\r\n      \"title\" : titletoAdd,\r\n      \"url\" : urltoAdd,\r\n      \"bgImg\" : imgtoAdd\r\n    };\r\n    Favorites.saveFavorite(newEntry, NTInstance);\r\n    $(this).remove();\r\n    console.log($(\".addModal .popularFavs\").children().length);\r\n    console.log($(\".onboardingModal .popularFavs\").children().length);\r\n    if($(\".addModal .popularFavs\").children().length === 0 || $(\".onboardingModal .popularFavs\").children().length === 0) {\r\n      $(\".addExtra\").hide();\r\n    }\r\n  });\r\n/*\r\n  Handler for close button\r\n*/\r\n  $(document).on(\"click\", \".closeBtn\", function(e) {\r\n    e.preventDefault();\r\n    var modalToClose = $(this).closest(\".modal\");\r\n    Actions.closeModal(modalToClose);\r\n  });\r\n\r\n  /*\r\n    Handler for the add button on the Add a New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".addBtn\",  function(e){\r\n    e.preventDefault();\r\n    var titleVal = $(\"#inputTitle\").val();\r\n    var urlVal = $(\"#inputUrl\").val();\r\n    urlVal = Util.addHttp(urlVal);\r\n    var isValidURL = Util.validateURL(urlVal);\r\n\r\n    if(!isValidURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid URL\").show();\r\n    }\r\n    var imageVal = $(\"#inputImage\").val();\r\n    imageVal = Util.addHttp(imageVal);\r\n    var isValidImgURL = Util.validateURL(imageVal);\r\n    if(!isValidImgURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid Image URL\").show();\r\n    }\r\n    if(!isValidURL && !isValidImgURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid URL & Image URL\").show();\r\n    }\r\n    if((titleVal !== \"\") && (urlVal !== \"\" && isValidURL) && (imageVal !== \"\" && isValidImgURL)){\r\n      var newEntry = {\r\n        \"title\" : titleVal,\r\n        \"url\" : urlVal,\r\n        \"bgImg\" : imageVal\r\n      };\r\n      Favorites.saveFavorite(newEntry);\r\n\r\n      if ($(\".modal\").length !== null) {\r\n        Actions.closeModal($(\".modal\"));\r\n      }\r\n      $(\"#addFormError\").hide();\r\n    }\r\n    else {\r\n      $(\"#addFormError\").show();\r\n    }\r\n  });\r\n  /*\r\n    Handler for the accept changes in edit favorite menu\r\n  */\r\n  // $(document).on(\"click\", \".editBtn\", function(e){\r\n  //   var itemToEdit = NTInstance.editedItem;\r\n  //   console.log(itemToEdit);\r\n  //   e.preventDefault();\r\n  //   var titleVal = itemToEdit[0].dataset.title;\r\n  //   var urlVal = $(\"#editInputUrl\").val();\r\n  //   var imageVal = $(\"#editInputImage\").val();\r\n  //   var newEntry = {\r\n  //     \"title\" : titleVal,\r\n  //     \"url\" : urlVal,\r\n  //     \"bgImg\" : imageVal\r\n  //   };\r\n  //   saveFavorite(newEntry);\r\n  //\r\n  //   var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  //   for (var i = 0; i < savedFavorites.length; i++) {\r\n  //     if(savedFavorites[i].url === itemToEdit.url) {\r\n  //       savedFavorites.splice(i, 1);\r\n  //     }\r\n  //   }\r\n  //   NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n  //   if ($(\".modal\").length !== null) {\r\n  //     closeModal($(\".modal\"));\r\n  //   }\r\n  //   $(itemToEdit).remove();\r\n  //   NTInstance.editedItem = null;\r\n  // });\r\n\r\n\r\n  $(document).on(\"click\", \".updateBtn\", function() {\r\n    var newImageURL = $(\"input[name=themeBGImage]\").val();\r\n    var isValidURL = Util.validateURL(newImageURL);\r\n    if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", newImageURL);\r\n      $(\"body\").css(\"background-image\", \"url('\" + newImageURL + \"')\");\r\n    }\r\n    else {\r\n      $(\".bgURLError\").show();\r\n    }\r\n  });\r\n  $(document).on(\"click\", \".removeBtn\", function() {\r\n    $(\"input[name=themeBGImage]\").val(\"\");\r\n    // var isValidURL = validateURL(newImageURL);\r\n    // if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", null);\r\n      $(\"body\").css(\"background-image\", \"none\");\r\n      $(\".bgURLError\").hide();\r\n    // }\r\n  });\r\n\r\n  $('input[type=radio][name=theme-select]').change(function() {\r\n    NTInstance.setSetting(\"userTheme\", this.value);\r\n    if (this.value == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n\r\n    }\r\n    else if (this.value == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n\r\n    }\r\n  });\r\n\r\n\r\n  $(document).on(\"change\", \".hoverOption\", function() {\r\n    var hoverSelected = $(this).val();\r\n    Actions.setHover(hoverSelected, NTInstance);\r\n  });\r\n  $(document).on(\"change\", \".fontOption\", function() {\r\n    var fontSelected = $(this).val();\r\n    Actions.setFont(fontSelected, NTInstance);\r\n  });\r\n\r\n  /*\r\n    Handlers for edit mode options on each of the favorites\r\n  */\r\n  $(document).on(\"click\", \".optDel\", function(e) {\r\n    e.preventDefault();\r\n    var favorite = $(this).parent();\r\n    var linkToDelete = favorite.attr(\"href\");\r\n    Favorites.deleteFavorite(linkToDelete, NTInstance);\r\n    $(this).parent().remove();\r\n  });\r\n  // $(document).on(\"click\", \".optEdit\", function(e) {\r\n  //   e.preventDefault();\r\n  //   // Open Edit Modal\r\n  //   NTInstance.editedItem = $(this).parent();\r\n  //   var favorite = $(this).parent();\r\n  //   $(\".editedItem\").text(favorite[0].dataset.title);\r\n  //   favorite.addClass(\"changingVals\");\r\n  //   triggerModal($(\".editModal\"));\r\n  //   $(\"#editInputUrl\").focus();\r\n  //\r\n  // });\r\n  $(document).on(\"click\", \".favorite\", function(e) {\r\n    if($(this).hasClass(\"editing\"))\r\n      e.preventDefault();\r\n  });\r\n});\r\n","let getPromise = function(url) {\r\n  return $.ajax({\r\n    url: url,\r\n    method: \"GET\"\r\n  });\r\n};\r\n\r\nlet validateURL = function (url) {\r\n  // var regex = \"\";\r\n  // console.log(typeof regex, url.match(regex));\r\n  if(url.match(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/) === null){\r\n    return false;\r\n  }\r\n  else return true;\r\n};\r\n\r\nlet addHttp = function (url) {\r\n  var newUrl;\r\n  if(url.match(/^(https?:\\/\\/)/) === null){\r\n    var addHttp = \"http://\";\r\n    newUrl = addHttp.concat(url);\r\n    return newUrl;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nmodule.exports = {\r\n  getPromise,\r\n  validateURL,\r\n  addHttp\r\n};\r\n"],"sourceRoot":"/source/"}