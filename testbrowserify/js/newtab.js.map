{"version":3,"sources":["js/newtab.js","js/node_modules/browserify/node_modules/browser-pack/_prelude.js","js/js/actions.js","js/js/createCalendar.js","js/js/favorites.js","js/js/newtab.js","js/js/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","triggerModal","modal","$","fadeIn","animate","right","closeModal","fadeOut","triggerEditMode","sortable","processEditedList","NTInstance","reorderedList","children","processedList","newEntry","title","childNodes","dataset","url","href","bgImg","push","setSetting","loadUserSettings","userTheme","getSetting","userFont","userHover","userBGImg","userFaveSize","userBGStyle","currentSettings","theme","font","hover","background","faveSize","bgStyle","setUserSettings","settings","cardSizeStr","parseInt","css","not","border","padding","transition","val","radios","each","el","attr","showInitialLoad","$onboarding","temp","html","setTimeout","hide","setFont","fontName","newFontStack","setHover","hoverName","addClass","removeClass","setSize","sizeVal","setBGStyle","styleVal","2","d","Date","month_name","month","getMonth","year","getFullYear","today","getDate","first_date","tmp","toDateString","first_day","substring","day_name","day_no","indexOf","days","table","document","createElement","buildCalendar","tr","c","td","daysOfTheWeek","innerHTML","appendChild","count","classList","add","3","Util","addFavorite","imageUrl","newListEntry","newFavorite","get","done","style","backgroundImage","fail","backgroundSize","backgroundPosition","backgroundRepeat","optDel","append","saveFavorite","entry","currentSaved","savedFavorites","getPopularFavorites","ajax","method","deleteFavorite","delUrl","forEach","item","index","splice","loadSavedFavorites","savedItems","loadPopularFavorites","popFavs","then","res","response","JSON","parse","createPopularFavs","loadDefaultFavorites","getPromise","createDefaultFavs","favorites","list","default_favorites","popular_favorites","match","grep","favHTML","./util.js","4","chrome","extension","getBackgroundPage","editing","Actions","Calendar","Favorites","ready","calendar","runtime","sendMessage","task","firstRun","focus","currentTime","toLocaleTimeString","navigator","language","hour","minute","currentDate","setInterval","on","preventDefault","clickElement","this","modalToOpen","toggleClass","toggle","settingsModal","onBoardingModal","calendarModal","selection","titletoAdd","urltoAdd","imgtoAdd","imgurl","remove","modalToClose","closest","titleVal","urlVal","addHttp","isValidURL","validateURL","text","show","imageVal","isValidImgURL","newImageURL","change","value","hoverSelected","fontSelected","sizeSelected","bgStyleSelected","favorite","parent","linkToDelete","hasClass","./actions.js","./createCalendar.js","./favorites.js","5","newUrl","concat"],"mappings":"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","file":"js/newtab.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// Prompt user for image to use for bookmark\r\n// and also the url.  Append to favorites\r\nlet triggerModal = function(modal) {\r\n    $('.lightbox').fadeIn();\r\n    // modal.fadeIn();\r\n    modal.animate({\r\n      \"right\" : \"0px\"\r\n    }, 400, \"swing\");\r\n\r\n};\r\n\r\nlet closeModal = function (modal) {\r\n    $('.lightbox').fadeOut();\r\n    // modal.fadeOut();\r\n    modal.animate({\r\n      \"right\" : \"-400px\"\r\n    }, 300, \"swing\");\r\n};\r\n\r\nlet triggerEditMode = function () {\r\n    $(\"#favorites\").sortable(\"enable\");\r\n};\r\n\r\nlet processEditedList = function (NTInstance) {\r\n    var reorderedList = $(\"#favorites\").children();\r\n    var processedList = [];\r\n    for (var i = 0; i < reorderedList.length; i++) {\r\n      var newEntry = {\r\n        \"title\": reorderedList[i].childNodes[0].dataset.title,\r\n        \"url\": reorderedList[i].childNodes[0].href,\r\n        \"bgImg\": reorderedList[i].childNodes[0].dataset.bgImg\r\n      };\r\n      processedList.push(newEntry);\r\n    }\r\n    NTInstance.setSetting(\"savedFavorites\", processedList);\r\n    $(\"#favorites\").sortable(\"disable\");\r\n};\r\n\r\nlet loadUserSettings = function(NTInstance) {\r\n    var userTheme = NTInstance.getSetting(\"userTheme\", \"light\");\r\n    var userFont = NTInstance.getSetting(\"userFont\", \"Work Sans\");\r\n    var userHover = NTInstance.getSetting(\"userHover\", \"hoverPop\");\r\n    var userBGImg = NTInstance.getSetting(\"userThemeBG\", null);\r\n    var userFaveSize = NTInstance.getSetting(\"userFaveSize\", \"80\");\r\n    var userBGStyle = NTInstance.getSetting(\"userBGStyle\", \"repeat\");\r\n    NTInstance.currentSettings = {\r\n      \"theme\" : userTheme,\r\n      \"font\" : userFont,\r\n      \"hover\" : userHover,\r\n      \"background\" : userBGImg,\r\n      \"faveSize\" : userFaveSize,\r\n      \"bgStyle\" : userBGStyle\r\n    };\r\n    // console.log(NTInstance.currentSettings);\r\n};\r\nlet setUserSettings = function (settings) {\r\n    let cardSizeStr = settings.faveSize + \"px \" + (parseInt(settings.faveSize) + 40) + \"px\";\r\n    if (settings.theme == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n      $(\".favorite\").css({\r\n        \"border\" : \"1.5px solid black\",\r\n        \"padding\" : cardSizeStr,\r\n        \"transition\" : \"0.3s transform\"\r\n      });\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n    }\r\n    else if (settings.theme == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css({\r\n        \"border\" : \"1.5px solid #d4d6e9\",\r\n        \"padding\" : cardSizeStr,\r\n        \"transition\" : \"0.3s transform\"\r\n      });\r\n\r\n    }\r\n    if(settings.bgStyle === \"cover\"){\r\n      $(\"body\").css(\"background-size\", settings.bgStyle);\r\n    }\r\n    else {\r\n      $(\"body\").css(\"background-repeat\", settings.bgStyle);\r\n      $(\"body\").css(\"background-size\", \"auto\");\r\n\r\n    }\r\n    $(\".favoriteSize\").val(settings.faveSize);\r\n    // setSize(settings.faveSize, NTInstance);\r\n    $(\"*\").not(\"i\").css(\"font-family\", settings.font);\r\n    $(\"select.fontOption\").val(settings.font);\r\n    $(\"select.hoverOption\").val(settings.hover);\r\n    var radios = $(\"input[name=theme-select]\");\r\n    $(radios).each(function(i, el) {\r\n      if($(el).val() === settings.theme)\r\n        $(el).attr(\"checked\", \"checked\");\r\n    });\r\n\r\n    if(settings.background !== null) {\r\n      $(\"body\").css(\"background-image\", \"url(\" + settings.background +\")\");\r\n      $(\"input[name=themeBGImage]\").val(settings.background);\r\n    }\r\n\r\n    $(\".themeBGImageRepeat\").val(settings.bgStyle);\r\n\r\n\r\n\r\n  };\r\n\r\n  // TO-DO: Could probably be implemented better\r\nlet showInitialLoad = function () {\r\n    var $onboarding = $(\".onboardingModal\");\r\n    var temp = $onboarding.html();\r\n    $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/cubeload.svg'/><p class='onboardGreeting'>Setting up DashTab</p>\");\r\n    setTimeout(function() {\r\n      $onboarding.children().fadeOut(\"slow\");\r\n    }, 3000);\r\n    setTimeout(function() {\r\n      $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/logo.jpg'/ alt='Dashtab Logo'><p class='onboardGreeting'>Welcome to DashTab!</p>\");\r\n    }, 3500);\r\n    setTimeout(function() {\r\n      $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n      // $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n      // $(\".modalWrapper\").fadeOut(\"slow\");\r\n    }, 6000);\r\n    setTimeout(function() {\r\n      // $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n      $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n      // $(\".modalWrapper\").fadeOut(\"slow\");\r\n    }, 6500);\r\n    setTimeout(function() {\r\n      $(\".modalWrapper\").fadeIn(\"slow\");\r\n      // $(\".onboardGreeting\").fadeOut(\"slow\");\r\n    }, 7000);\r\n  };\r\n\r\nlet setFont = function(fontName, NTInstance) {\r\n    let newFontStack = fontName;\r\n    NTInstance.setSetting(\"userFont\", newFontStack);\r\n    $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n};\r\n\r\nlet setHover = function(hoverName, NTInstance) {\r\n  NTInstance.setSetting(\"userHover\", hoverName);\r\n  switch(hoverName) {\r\n\r\n    case \"hoverPop\":\r\n    $(\".favorite\").addClass(\"hoverPop\").removeClass(\"hoverNone hoverHighlight\");\r\n    break;\r\n\r\n    case \"hoverHighlight\":\r\n    $(\".favorite\").addClass(\"hoverHighlight\").removeClass(\"hoverNone hoverPop\");\r\n    break;\r\n\r\n    case \"hoverNone\":\r\n    $(\".favorite\").addClass(\"hoverNone\").removeClass(\"hoverPop hoverHighlight\");\r\n    break;\r\n  }\r\n  //$(\".favorite\").addClass(hoverName).removeClass(\"hoverNone hoverHighlight\");\r\n};\r\n\r\nlet setSize = function(sizeVal, NTInstance) {\r\n  NTInstance.setSetting(\"userFaveSize\", sizeVal);\r\n  let cardSizeStr = sizeVal + \"px \" + (parseInt(sizeVal) + 40) + \"px\";\r\n  $(\".favorite\").css({\r\n    \"padding\" : cardSizeStr,\r\n    \"transition\" : \"0.4s padding, 0.3s transform\"\r\n  });\r\n};\r\nlet setBGStyle = function(styleVal, NTInstance) {\r\n  NTInstance.setSetting(\"userBGStyle\", styleVal);\r\n  if(styleVal === \"cover\"){\r\n    $(\"body\").css(\"background-size\", styleVal);\r\n  }\r\n  else {\r\n    $(\"body\").css(\"background-repeat\", styleVal);\r\n    $(\"body\").css(\"background-size\", \"auto\");\r\n  }\r\n  // let cardSizeStr = sizeVal + \"px \" + (parseInt(sizeVal) + 40) + \"px\";\r\n};\r\nmodule.exports = {\r\n  triggerModal,\r\n  closeModal,\r\n  triggerEditMode,\r\n  processEditedList,\r\n  loadUserSettings,\r\n  setUserSettings,\r\n  showInitialLoad,\r\n  setFont,\r\n  setHover,\r\n  setSize,\r\n  setBGStyle\r\n};\r\n\n},{}],2:[function(require,module,exports){\n// Calendar\r\nlet d = new Date();\r\nlet month_name = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\nlet month = d.getMonth(); // 0 - 11\r\nlet year = d.getFullYear(); // 2016\r\nlet today = d.getDate();\r\nlet first_date = month_name[month] + \" \" + 1 + \" \" + year;\r\nlet tmp = new Date(first_date).toDateString();\r\nlet first_day = tmp.substring(0, 3);\r\nlet day_name = ['Sun', 'Mon', \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\nlet day_no = day_name.indexOf(first_day);\r\nlet days = new Date(year, month+1, 0).getDate();\r\nlet table = document.createElement(\"table\");\r\nlet tr = document.createElement(\"tr\");\r\n\r\nlet buildCalendar = function () {\r\n\r\nvar tr = document.createElement(\"tr\");\r\n// Row for day letters\r\nfor(var c = 0; c <= 6; c++) {\r\n  var td = document.createElement(\"td\");\r\n  var daysOfTheWeek = [\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];\r\n  td.innerHTML = daysOfTheWeek[c];\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// Row for blank spaces\r\ntr = document.createElement(\"tr\");\r\nfor(c = 0;c <= 6; c++) {\r\n  if(c === day_no) {\r\n    break;\r\n  }\r\n  var td = document.createElement(\"td\");\r\n  td.innerHTML = \"\";\r\n  tr.appendChild(td);\r\n}\r\n\r\n// Start counting days of the month\r\nvar count = 1;\r\nfor(; c <=6; c++) {\r\n  // console.log(c);\r\n  var td = document.createElement(\"td\");\r\n\r\n  td.innerHTML = \"<span>\" + count + \"</span>\";\r\n  //console.log(count, today);\r\n  if(count === today){\r\n    td.classList.add(\"currentDay\");\r\n  }\r\n\r\n  count++;\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// rest of the date rows\r\nfor(var r=3; r<= 6; r++) {\r\n  tr = document.createElement(\"tr\");\r\n  for(var c = 0; c <= 6;c++) {\r\n    if(count > days) {\r\n      table.appendChild(tr);\r\n      return table;\r\n    }\r\n    var td = document.createElement(\"td\");\r\n    td.innerHTML = \"<span>\" + count + \"</span>\";\r\n    if(count === today){\r\n      td.classList.add(\"currentDay\");\r\n    }\r\n    count++;\r\n    tr.appendChild(td);\r\n  }\r\n  table.appendChild(tr);\r\n}\r\n}\r\n\r\n//var calendar = buildCalendar();\r\nmodule.exports = {\r\n  buildCalendar,\r\n  month_name,\r\n  month,\r\n  year\r\n};\r\n\n},{}],3:[function(require,module,exports){\nconst Util = require(\"./util.js\");\r\n// let NTInstance;\r\n// let init = function(NT) {\r\n//   NTInstance = NT;\r\n// };\r\n// Add a new favorite to the favorites grid\r\nlet addFavorite = function (title, url, imageUrl, NTInstance) {\r\n    var newListEntry = document.createElement(\"LI\");\r\n    var newFavorite = document.createElement(\"A\");\r\n    newFavorite.href = url;\r\n    // console.log(imageExists(imageUrl));\r\n    $.get(imageUrl)\r\n      .done(function() {\r\n        newFavorite.style.backgroundImage = \"url(\" + imageUrl + \")\";\r\n      }).fail(function() {\r\n        newFavorite.style.backgroundImage = \"url('/newtab/images/placeholder.png')\";\r\n    });\r\n    newFavorite.style.backgroundSize = \"cover\";\r\n    newFavorite.style.backgroundPosition = \"center center\";\r\n    newFavorite.style.backgroundRepeat = \"no-repeat\";\r\n    newFavorite.classList.add(\"favorite\", NTInstance.currentSettings.hover);\r\n    newFavorite.dataset.title = title;\r\n    newFavorite.dataset.bgImg = imageUrl;\r\n    var optDel = document.createElement(\"I\");\r\n    optDel.classList.add(\"fa\", \"fa-trash-o\", \"fa-lg\", \"fa-fw\", \"optDel\");\r\n    // var optEdit = document.createElement(\"I\");\r\n    // optEdit.classList.add(\"fa\", \"fa-pencil\", \"fa-lg\", \"fa-fw\", \"optEdit\");\r\n    newFavorite.appendChild(optDel);\r\n    // newFavorite.appendChild(optEdit);\r\n    newListEntry.appendChild(newFavorite);\r\n    $(\"#favorites\").append(newListEntry);\r\n    $(\".favorite\").children().hide();\r\n};\r\n\r\n\r\n  // Save favorite to local storage\r\nlet saveFavorite = function(entry, NTInstance) {\r\n    var currentSaved = [];\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n      currentSaved = savedFavorites;\r\n    }\r\n    currentSaved.push(entry);\r\n    NTInstance.setSetting(\"savedFavorites\" , currentSaved);\r\n    addFavorite(entry.title, entry.url, entry.bgImg, NTInstance);\r\n    $(\"#inputUrl\").val(\"\");\r\n    $(\"#inputImage\").val(\"\");\r\n  };\r\n\r\nlet getPopularFavorites = function () {\r\n    return $.ajax({\r\n      url: \"./popularFavs.json\",\r\n      method: \"GET\"\r\n    });\r\n};\r\n\r\nlet deleteFavorite = function (delUrl, NTInstance) {\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n    savedFavorites.forEach(function(item, index) {\r\n      if(item.url === delUrl) {\r\n        savedFavorites.splice(index, 1);\r\n      }\r\n\r\n    });\r\n    NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n    }\r\n};\r\n\r\n  // Load saved favorites onload\r\nlet loadSavedFavorites = function(NTInstance) {\r\n    var savedItems = [];\r\n      var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n      if(savedFavorites !== null){\r\n      savedItems = savedFavorites;\r\n      savedItems.forEach(function(item) {\r\n        addFavorite(item.title, item.url, item.bgImg, NTInstance);\r\n      });\r\n      }\r\n};\r\n\r\nlet loadPopularFavorites = function (NTInstance) {\r\n    var popFavs = getPopularFavorites();\r\n    popFavs.then(function(res) {\r\n      var response = JSON.parse(res);\r\n      createPopularFavs(response, NTInstance);\r\n    });\r\n};\r\nlet loadDefaultFavorites = function (NTInstance) {\r\n    var popFavs = Util.getPromise(\"/newtab/defaultFavs.json\");\r\n    popFavs.then(function(res) {\r\n      var response = JSON.parse(res);\r\n      createDefaultFavs(response, NTInstance);\r\n    });\r\n};\r\n\r\nlet createDefaultFavs = function (favorites, NTInstance) {\r\n    var list = favorites.default_favorites;\r\n    // console.log(list);\r\n    for(var i = 0; i < list.length; i++){\r\n      var entry = {\r\n        \"title\" : list[i].title,\r\n        \"url\" : list[i].url,\r\n        \"bgImg\" : list[i].bgImg,\r\n      };\r\n      // console.log(entry);\r\n      saveFavorite(entry, NTInstance);\r\n    }\r\n};\r\n\r\nlet createPopularFavs = function (favorites, NTInstance) {\r\n    // console.log(NTInstance, favorites);\r\n    var list = favorites.popular_favorites;\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    var match = [];\r\n    //console.log(NTInstance);\r\n    for(var i = 0; i < list.length; i++){\r\n      if(savedFavorites !== null){\r\n      match = $.grep(savedFavorites, function(e) {\r\n        return e.url === list[i].url;\r\n      });\r\n      }\r\n\r\n      if(match.length === 0){\r\n        var favHTML = \"<a href='#' class='popFav' data-title=\" + list[i].title + \" data-url=\" + list[i].url + \" data-imgurl=\" + list[i].bgImg +\">\" + list[i].title + \"</a>\";\r\n        $(\".popularFavs\").append(favHTML);\r\n      }\r\n    }\r\n};\r\n\r\nmodule.exports = {\r\n\r\n  addFavorite,\r\n  saveFavorite,\r\n  getPopularFavorites,\r\n  deleteFavorite,\r\n  loadSavedFavorites,\r\n  loadPopularFavorites,\r\n  loadDefaultFavorites,\r\n  createDefaultFavs,\r\n  createPopularFavs\r\n};\r\n\n},{\"./util.js\":5}],4:[function(require,module,exports){\n// import $ from \"jquery\";\r\nvar background = chrome.extension.getBackgroundPage();\r\nvar NTInstance = background.NTInstance;\r\nNTInstance.editing = false;\r\nNTInstance.currentSettings = {\r\n  \"theme\" : \"light\",\r\n  \"font\" : \"Work Sans\",\r\n  \"hover\" : \"hoverPop\",\r\n  \"background\" : null,\r\n  \"faveSize\" : \"80\"\r\n};\r\n\r\nconst Actions = require(\"./actions.js\");\r\nconst Calendar = require(\"./createCalendar.js\");\r\nconst Favorites = require(\"./favorites.js\");\r\nconst Util = require(\"./util.js\");\r\n$(document).ready(function() {\r\n\r\n  Actions.loadUserSettings(NTInstance);\r\n  Favorites.loadSavedFavorites(NTInstance);\r\n  Favorites.loadPopularFavorites(NTInstance);\r\n  Actions.setUserSettings(NTInstance.currentSettings);\r\n  var calendar = Calendar.buildCalendar();\r\n\r\n  $(\".calendar-head\").html(\"<span>\" + Calendar.month_name[Calendar.month] + \" \" + Calendar.year + \"</span\");\r\n  $(\".calendar\").append(calendar);\r\n  $(\"#favorites\").sortable();\r\n  $(\"#favorites\").sortable(\"disable\");\r\n\r\n  chrome.runtime.sendMessage({task: \"checkFirstRun\"}, function(res) {\r\n    if(res.firstRun){\r\n      Actions.showInitialLoad();\r\n      Favorites.loadDefaultFavorites(NTInstance);\r\n      Actions.triggerModal($(\".onboardingModal\"));\r\n      $(\"#obInputTitle\").focus();\r\n    }\r\n\r\n    // Hide edit icons\r\n    $(\".favorite\").children().hide();\r\n  });\r\n\r\n  // Refresh time every second\r\n  var currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n  $('#time').html(currentTime);\r\n  var currentDate = new Date().toDateString();\r\n  $('#date').html(currentDate);\r\n  setInterval(function(){\r\n    currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n    $('#time').html(currentTime);\r\n  }, 1000);\r\n\r\n  /*\r\n    Handlers for the top right main user actions menu\r\n  */\r\n  $(document).on(\"click\", \".userAction\", function(e) {\r\n     e.preventDefault();\r\n     var clickElement = $(this).attr('id');\r\n     //console.log(clickElement);\r\n     switch(clickElement) {\r\n        case \"addFavorite\":\r\n          if($(\".addModal .popularFavs\").children().length === 0){\r\n            $(\".addExtra\").hide();\r\n          }\r\n          var modalToOpen = $(\".addModal\");\r\n          Actions.triggerModal(modalToOpen);\r\n          $(\"#inputTitle\").focus();\r\n          break;\r\n\r\n        case 'editMode':\r\n          e.preventDefault();\r\n          NTInstance.editing = !NTInstance.editing;\r\n          $(\".favorite\").toggleClass(\"editing\");\r\n          $(\".favorite\").children().toggle();\r\n          if(NTInstance.editing){\r\n            Actions.triggerEditMode();\r\n          }\r\n          else{\r\n            Actions.processEditedList(NTInstance);\r\n          }\r\n          break;\r\n\r\n        case 'openSettings':\r\n          e.preventDefault();\r\n          var settingsModal = $(\".settingsModal\");\r\n          Actions.triggerModal(settingsModal);\r\n\r\n          break;\r\n\r\n        case 'openOnboarding':\r\n          e.preventDefault();\r\n          var onBoardingModal = $(\".onboardingModal\");\r\n          Actions.triggerModal(onBoardingModal);\r\n          break;\r\n\r\n        case 'openCalendar':\r\n          e.preventDefault();\r\n          var calendarModal = $(\".calendarModal\");\r\n          Actions.triggerModal(calendarModal);\r\n          break;\r\n     }\r\n  });\r\n\r\n  /*\r\n    Handler for the suggested favorites in the Add New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".popFav\", function(e){\r\n    e.preventDefault();\r\n    var selection = $(this)[0];\r\n    var titletoAdd = selection.dataset.title;\r\n    var urltoAdd = selection.dataset.url;\r\n    var imgtoAdd = selection.dataset.imgurl;\r\n\r\n    var newEntry = {\r\n      \"title\" : titletoAdd,\r\n      \"url\" : urltoAdd,\r\n      \"bgImg\" : imgtoAdd\r\n    };\r\n    Favorites.saveFavorite(newEntry, NTInstance);\r\n    $(this).remove();\r\n    if($(\".addModal .popularFavs\").children().length === 0 || $(\".onboardingModal .popularFavs\").children().length === 0) {\r\n      $(\".addExtra, .popularFavs\").hide();\r\n    }\r\n  });\r\n/*\r\n  Handler for close button\r\n*/\r\n  $(document).on(\"click\", \".closeBtn\", function(e) {\r\n    e.preventDefault();\r\n    var modalToClose = $(this).closest(\".modal\");\r\n    Actions.closeModal(modalToClose);\r\n  });\r\n\r\n  /*\r\n    Handler for the add button on the Add a New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".addBtn\",  function(e){\r\n    e.preventDefault();\r\n    var titleVal = $(\"#inputTitle\").val();\r\n    var urlVal = $(\"#inputUrl\").val();\r\n    urlVal = Util.addHttp(urlVal);\r\n    var isValidURL = Util.validateURL(urlVal);\r\n    if(!isValidURL) {\r\n      $(\".addFormError\").css(\"color\", \"red\");\r\n      $(\".addFormError\").text(\"Please enter a valid URL\").show();\r\n    }\r\n    var imageVal = $(\"#inputImage\").val();\r\n    imageVal = Util.addHttp(imageVal);\r\n    var isValidImgURL = Util.validateURL(imageVal);\r\n    if(!isValidImgURL) {\r\n      $(\".addFormError\").text(\"Please enter a valid Image URL\").show();\r\n    }\r\n    if(!isValidURL && !isValidImgURL) {\r\n      $(\".addFormError\").text(\"Please enter a valid URL & Image URL\").show();\r\n    }\r\n    if((titleVal !== \"\") && (urlVal !== \"\" && isValidURL) && (imageVal !== \"\" && isValidImgURL)){\r\n      var newEntry = {\r\n        \"title\" : titleVal,\r\n        \"url\" : urlVal,\r\n        \"bgImg\" : imageVal\r\n      };\r\n      Favorites.saveFavorite(newEntry);\r\n\r\n      if ($(\".modal\").length !== null) {\r\n        Actions.closeModal($(\".modal\"));\r\n      }\r\n      $(\".addFormError\").hide();\r\n    }\r\n    else {\r\n      $(\".addFormError\").show();\r\n    }\r\n  });\r\n  /*\r\n    Handler for the accept changes in edit favorite menu\r\n  */\r\n  // $(document).on(\"click\", \".editBtn\", function(e){\r\n  //   var itemToEdit = NTInstance.editedItem;\r\n  //   console.log(itemToEdit);\r\n  //   e.preventDefault();\r\n  //   var titleVal = itemToEdit[0].dataset.title;\r\n  //   var urlVal = $(\"#editInputUrl\").val();\r\n  //   var imageVal = $(\"#editInputImage\").val();\r\n  //   var newEntry = {\r\n  //     \"title\" : titleVal,\r\n  //     \"url\" : urlVal,\r\n  //     \"bgImg\" : imageVal\r\n  //   };\r\n  //   saveFavorite(newEntry);\r\n  //\r\n  //   var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  //   for (var i = 0; i < savedFavorites.length; i++) {\r\n  //     if(savedFavorites[i].url === itemToEdit.url) {\r\n  //       savedFavorites.splice(i, 1);\r\n  //     }\r\n  //   }\r\n  //   NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n  //   if ($(\".modal\").length !== null) {\r\n  //     closeModal($(\".modal\"));\r\n  //   }\r\n  //   $(itemToEdit).remove();\r\n  //   NTInstance.editedItem = null;\r\n  // });\r\n\r\n\r\n  $(document).on(\"click\", \".updateBtn\", function() {\r\n    var newImageURL = $(\"input[name=themeBGImage]\").val();\r\n    var isValidURL = Util.validateURL(newImageURL);\r\n    if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", newImageURL);\r\n      $(\"body\").css(\"background-image\", \"url('\" + newImageURL + \"')\");\r\n    }\r\n    else {\r\n      $(\".bgURLError\").show();\r\n    }\r\n  });\r\n  $(document).on(\"click\", \".removeBtn\", function() {\r\n    $(\"input[name=themeBGImage]\").val(\"\");\r\n    // var isValidURL = validateURL(newImageURL);\r\n    // if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", null);\r\n      $(\"body\").css(\"background-image\", \"none\");\r\n      $(\".bgURLError\").hide();\r\n    // }\r\n  });\r\n\r\n  $('input[type=radio][name=theme-select]').change(function() {\r\n    NTInstance.setSetting(\"userTheme\", this.value);\r\n    if (this.value == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span, .addFormError\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n\r\n    }\r\n    else if (this.value == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n\r\n    }\r\n  });\r\n\r\n\r\n  $(document).on(\"change\", \".hoverOption\", function() {\r\n    var hoverSelected = $(this).val();\r\n    Actions.setHover(hoverSelected, NTInstance);\r\n  });\r\n  $(document).on(\"change\", \".fontOption\", function() {\r\n    var fontSelected = $(this).val();\r\n    Actions.setFont(fontSelected, NTInstance);\r\n  });\r\n  $(document).on(\"change\", \".favoriteSize\", function() {\r\n    var sizeSelected = $(this).val();\r\n    Actions.setSize(sizeSelected, NTInstance);\r\n  });\r\n  $(document).on(\"change\", \".themeBGImageRepeat\", function() {\r\n    var bgStyleSelected = $(this).val();\r\n    Actions.setBGStyle(bgStyleSelected, NTInstance);\r\n  });\r\n  /*\r\n    Handlers for edit mode options on each of the favorites\r\n  */\r\n  $(document).on(\"click\", \".optDel\", function(e) {\r\n    e.preventDefault();\r\n    var favorite = $(this).parent();\r\n    var linkToDelete = favorite.attr(\"href\");\r\n    Favorites.deleteFavorite(linkToDelete, NTInstance);\r\n    $(this).parent().remove();\r\n  });\r\n  // $(document).on(\"click\", \".optEdit\", function(e) {\r\n  //   e.preventDefault();\r\n  //   // Open Edit Modal\r\n  //   NTInstance.editedItem = $(this).parent();\r\n  //   var favorite = $(this).parent();\r\n  //   $(\".editedItem\").text(favorite[0].dataset.title);\r\n  //   favorite.addClass(\"changingVals\");\r\n  //   triggerModal($(\".editModal\"));\r\n  //   $(\"#editInputUrl\").focus();\r\n  //\r\n  // });\r\n  $(document).on(\"click\", \".favorite\", function(e) {\r\n    if($(this).hasClass(\"editing\"))\r\n      e.preventDefault();\r\n  });\r\n});\r\n\n},{\"./actions.js\":1,\"./createCalendar.js\":2,\"./favorites.js\":3,\"./util.js\":5}],5:[function(require,module,exports){\nlet getPromise = function(url) {\r\n  return $.ajax({\r\n    url: url,\r\n    method: \"GET\"\r\n  });\r\n};\r\n\r\nlet validateURL = function (url) {\r\n  // var regex = \"\";\r\n  // console.log(typeof regex, url.match(regex));\r\n  if(url.match(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/) === null){\r\n    return false;\r\n  }\r\n  else return true;\r\n};\r\n\r\nlet addHttp = function (url) {\r\n  var newUrl;\r\n  if(url.match(/^(https?:\\/\\/)/) === null){\r\n    var addHttp = \"http://\";\r\n    newUrl = addHttp.concat(url);\r\n    return newUrl;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nmodule.exports = {\r\n  getPromise,\r\n  validateURL,\r\n  addHttp\r\n};\r\n\n},{}]},{},[4])\n\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Prompt user for image to use for bookmark\r\n// and also the url.  Append to favorites\r\nlet triggerModal = function(modal) {\r\n    $('.lightbox').fadeIn();\r\n    // modal.fadeIn();\r\n    modal.animate({\r\n      \"right\" : \"0px\"\r\n    }, 400, \"swing\");\r\n\r\n};\r\n\r\nlet closeModal = function (modal) {\r\n    $('.lightbox').fadeOut();\r\n    // modal.fadeOut();\r\n    modal.animate({\r\n      \"right\" : \"-400px\"\r\n    }, 300, \"swing\");\r\n};\r\n\r\nlet triggerEditMode = function () {\r\n    $(\"#favorites\").sortable(\"enable\");\r\n};\r\n\r\nlet processEditedList = function (NTInstance) {\r\n    var reorderedList = $(\"#favorites\").children();\r\n    var processedList = [];\r\n    for (var i = 0; i < reorderedList.length; i++) {\r\n      var newEntry = {\r\n        \"title\": reorderedList[i].childNodes[0].dataset.title,\r\n        \"url\": reorderedList[i].childNodes[0].href,\r\n        \"bgImg\": reorderedList[i].childNodes[0].dataset.bgImg\r\n      };\r\n      processedList.push(newEntry);\r\n    }\r\n    NTInstance.setSetting(\"savedFavorites\", processedList);\r\n    $(\"#favorites\").sortable(\"disable\");\r\n};\r\n\r\nlet loadUserSettings = function(NTInstance) {\r\n    var userTheme = NTInstance.getSetting(\"userTheme\", \"light\");\r\n    var userFont = NTInstance.getSetting(\"userFont\", \"Work Sans\");\r\n    var userHover = NTInstance.getSetting(\"userHover\", \"hoverPop\");\r\n    var userBGImg = NTInstance.getSetting(\"userThemeBG\", null);\r\n    var userFaveSize = NTInstance.getSetting(\"userFaveSize\", \"80\");\r\n    var userBGStyle = NTInstance.getSetting(\"userBGStyle\", \"repeat\");\r\n    NTInstance.currentSettings = {\r\n      \"theme\" : userTheme,\r\n      \"font\" : userFont,\r\n      \"hover\" : userHover,\r\n      \"background\" : userBGImg,\r\n      \"faveSize\" : userFaveSize,\r\n      \"bgStyle\" : userBGStyle\r\n    };\r\n    // console.log(NTInstance.currentSettings);\r\n};\r\nlet setUserSettings = function (settings) {\r\n    let cardSizeStr = settings.faveSize + \"px \" + (parseInt(settings.faveSize) + 40) + \"px\";\r\n    if (settings.theme == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n      $(\".favorite\").css({\r\n        \"border\" : \"1.5px solid black\",\r\n        \"padding\" : cardSizeStr,\r\n        \"transition\" : \"0.3s transform\"\r\n      });\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n    }\r\n    else if (settings.theme == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css({\r\n        \"border\" : \"1.5px solid #d4d6e9\",\r\n        \"padding\" : cardSizeStr,\r\n        \"transition\" : \"0.3s transform\"\r\n      });\r\n\r\n    }\r\n    if(settings.bgStyle === \"cover\"){\r\n      $(\"body\").css(\"background-size\", settings.bgStyle);\r\n    }\r\n    else {\r\n      $(\"body\").css(\"background-repeat\", settings.bgStyle);\r\n      $(\"body\").css(\"background-size\", \"auto\");\r\n\r\n    }\r\n    $(\".favoriteSize\").val(settings.faveSize);\r\n    // setSize(settings.faveSize, NTInstance);\r\n    $(\"*\").not(\"i\").css(\"font-family\", settings.font);\r\n    $(\"select.fontOption\").val(settings.font);\r\n    $(\"select.hoverOption\").val(settings.hover);\r\n    var radios = $(\"input[name=theme-select]\");\r\n    $(radios).each(function(i, el) {\r\n      if($(el).val() === settings.theme)\r\n        $(el).attr(\"checked\", \"checked\");\r\n    });\r\n\r\n    if(settings.background !== null) {\r\n      $(\"body\").css(\"background-image\", \"url(\" + settings.background +\")\");\r\n      $(\"input[name=themeBGImage]\").val(settings.background);\r\n    }\r\n\r\n    $(\".themeBGImageRepeat\").val(settings.bgStyle);\r\n\r\n\r\n\r\n  };\r\n\r\n  // TO-DO: Could probably be implemented better\r\nlet showInitialLoad = function () {\r\n    var $onboarding = $(\".onboardingModal\");\r\n    var temp = $onboarding.html();\r\n    $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/cubeload.svg'/><p class='onboardGreeting'>Setting up DashTab</p>\");\r\n    setTimeout(function() {\r\n      $onboarding.children().fadeOut(\"slow\");\r\n    }, 3000);\r\n    setTimeout(function() {\r\n      $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/logo.jpg'/ alt='Dashtab Logo'><p class='onboardGreeting'>Welcome to DashTab!</p>\");\r\n    }, 3500);\r\n    setTimeout(function() {\r\n      $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n      // $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n      // $(\".modalWrapper\").fadeOut(\"slow\");\r\n    }, 6000);\r\n    setTimeout(function() {\r\n      // $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n      $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n      // $(\".modalWrapper\").fadeOut(\"slow\");\r\n    }, 6500);\r\n    setTimeout(function() {\r\n      $(\".modalWrapper\").fadeIn(\"slow\");\r\n      // $(\".onboardGreeting\").fadeOut(\"slow\");\r\n    }, 7000);\r\n  };\r\n\r\nlet setFont = function(fontName, NTInstance) {\r\n    let newFontStack = fontName;\r\n    NTInstance.setSetting(\"userFont\", newFontStack);\r\n    $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n};\r\n\r\nlet setHover = function(hoverName, NTInstance) {\r\n  NTInstance.setSetting(\"userHover\", hoverName);\r\n  switch(hoverName) {\r\n\r\n    case \"hoverPop\":\r\n    $(\".favorite\").addClass(\"hoverPop\").removeClass(\"hoverNone hoverHighlight\");\r\n    break;\r\n\r\n    case \"hoverHighlight\":\r\n    $(\".favorite\").addClass(\"hoverHighlight\").removeClass(\"hoverNone hoverPop\");\r\n    break;\r\n\r\n    case \"hoverNone\":\r\n    $(\".favorite\").addClass(\"hoverNone\").removeClass(\"hoverPop hoverHighlight\");\r\n    break;\r\n  }\r\n  //$(\".favorite\").addClass(hoverName).removeClass(\"hoverNone hoverHighlight\");\r\n};\r\n\r\nlet setSize = function(sizeVal, NTInstance) {\r\n  NTInstance.setSetting(\"userFaveSize\", sizeVal);\r\n  let cardSizeStr = sizeVal + \"px \" + (parseInt(sizeVal) + 40) + \"px\";\r\n  $(\".favorite\").css({\r\n    \"padding\" : cardSizeStr,\r\n    \"transition\" : \"0.4s padding, 0.3s transform\"\r\n  });\r\n};\r\nlet setBGStyle = function(styleVal, NTInstance) {\r\n  NTInstance.setSetting(\"userBGStyle\", styleVal);\r\n  if(styleVal === \"cover\"){\r\n    $(\"body\").css(\"background-size\", styleVal);\r\n  }\r\n  else {\r\n    $(\"body\").css(\"background-repeat\", styleVal);\r\n    $(\"body\").css(\"background-size\", \"auto\");\r\n  }\r\n  // let cardSizeStr = sizeVal + \"px \" + (parseInt(sizeVal) + 40) + \"px\";\r\n};\r\nmodule.exports = {\r\n  triggerModal,\r\n  closeModal,\r\n  triggerEditMode,\r\n  processEditedList,\r\n  loadUserSettings,\r\n  setUserSettings,\r\n  showInitialLoad,\r\n  setFont,\r\n  setHover,\r\n  setSize,\r\n  setBGStyle\r\n};\r\n","// Calendar\r\nlet d = new Date();\r\nlet month_name = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\nlet month = d.getMonth(); // 0 - 11\r\nlet year = d.getFullYear(); // 2016\r\nlet today = d.getDate();\r\nlet first_date = month_name[month] + \" \" + 1 + \" \" + year;\r\nlet tmp = new Date(first_date).toDateString();\r\nlet first_day = tmp.substring(0, 3);\r\nlet day_name = ['Sun', 'Mon', \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\nlet day_no = day_name.indexOf(first_day);\r\nlet days = new Date(year, month+1, 0).getDate();\r\nlet table = document.createElement(\"table\");\r\nlet tr = document.createElement(\"tr\");\r\n\r\nlet buildCalendar = function () {\r\n\r\nvar tr = document.createElement(\"tr\");\r\n// Row for day letters\r\nfor(var c = 0; c <= 6; c++) {\r\n  var td = document.createElement(\"td\");\r\n  var daysOfTheWeek = [\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];\r\n  td.innerHTML = daysOfTheWeek[c];\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// Row for blank spaces\r\ntr = document.createElement(\"tr\");\r\nfor(c = 0;c <= 6; c++) {\r\n  if(c === day_no) {\r\n    break;\r\n  }\r\n  var td = document.createElement(\"td\");\r\n  td.innerHTML = \"\";\r\n  tr.appendChild(td);\r\n}\r\n\r\n// Start counting days of the month\r\nvar count = 1;\r\nfor(; c <=6; c++) {\r\n  // console.log(c);\r\n  var td = document.createElement(\"td\");\r\n\r\n  td.innerHTML = \"<span>\" + count + \"</span>\";\r\n  //console.log(count, today);\r\n  if(count === today){\r\n    td.classList.add(\"currentDay\");\r\n  }\r\n\r\n  count++;\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// rest of the date rows\r\nfor(var r=3; r<= 6; r++) {\r\n  tr = document.createElement(\"tr\");\r\n  for(var c = 0; c <= 6;c++) {\r\n    if(count > days) {\r\n      table.appendChild(tr);\r\n      return table;\r\n    }\r\n    var td = document.createElement(\"td\");\r\n    td.innerHTML = \"<span>\" + count + \"</span>\";\r\n    if(count === today){\r\n      td.classList.add(\"currentDay\");\r\n    }\r\n    count++;\r\n    tr.appendChild(td);\r\n  }\r\n  table.appendChild(tr);\r\n}\r\n}\r\n\r\n//var calendar = buildCalendar();\r\nmodule.exports = {\r\n  buildCalendar,\r\n  month_name,\r\n  month,\r\n  year\r\n};\r\n","const Util = require(\"./util.js\");\r\n// let NTInstance;\r\n// let init = function(NT) {\r\n//   NTInstance = NT;\r\n// };\r\n// Add a new favorite to the favorites grid\r\nlet addFavorite = function (title, url, imageUrl, NTInstance) {\r\n    var newListEntry = document.createElement(\"LI\");\r\n    var newFavorite = document.createElement(\"A\");\r\n    newFavorite.href = url;\r\n    // console.log(imageExists(imageUrl));\r\n    $.get(imageUrl)\r\n      .done(function() {\r\n        newFavorite.style.backgroundImage = \"url(\" + imageUrl + \")\";\r\n      }).fail(function() {\r\n        newFavorite.style.backgroundImage = \"url('/newtab/images/placeholder.png')\";\r\n    });\r\n    newFavorite.style.backgroundSize = \"cover\";\r\n    newFavorite.style.backgroundPosition = \"center center\";\r\n    newFavorite.style.backgroundRepeat = \"no-repeat\";\r\n    newFavorite.classList.add(\"favorite\", NTInstance.currentSettings.hover);\r\n    newFavorite.dataset.title = title;\r\n    newFavorite.dataset.bgImg = imageUrl;\r\n    var optDel = document.createElement(\"I\");\r\n    optDel.classList.add(\"fa\", \"fa-trash-o\", \"fa-lg\", \"fa-fw\", \"optDel\");\r\n    // var optEdit = document.createElement(\"I\");\r\n    // optEdit.classList.add(\"fa\", \"fa-pencil\", \"fa-lg\", \"fa-fw\", \"optEdit\");\r\n    newFavorite.appendChild(optDel);\r\n    // newFavorite.appendChild(optEdit);\r\n    newListEntry.appendChild(newFavorite);\r\n    $(\"#favorites\").append(newListEntry);\r\n    $(\".favorite\").children().hide();\r\n};\r\n\r\n\r\n  // Save favorite to local storage\r\nlet saveFavorite = function(entry, NTInstance) {\r\n    var currentSaved = [];\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n      currentSaved = savedFavorites;\r\n    }\r\n    currentSaved.push(entry);\r\n    NTInstance.setSetting(\"savedFavorites\" , currentSaved);\r\n    addFavorite(entry.title, entry.url, entry.bgImg, NTInstance);\r\n    $(\"#inputUrl\").val(\"\");\r\n    $(\"#inputImage\").val(\"\");\r\n  };\r\n\r\nlet getPopularFavorites = function () {\r\n    return $.ajax({\r\n      url: \"./popularFavs.json\",\r\n      method: \"GET\"\r\n    });\r\n};\r\n\r\nlet deleteFavorite = function (delUrl, NTInstance) {\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n    savedFavorites.forEach(function(item, index) {\r\n      if(item.url === delUrl) {\r\n        savedFavorites.splice(index, 1);\r\n      }\r\n\r\n    });\r\n    NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n    }\r\n};\r\n\r\n  // Load saved favorites onload\r\nlet loadSavedFavorites = function(NTInstance) {\r\n    var savedItems = [];\r\n      var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n      if(savedFavorites !== null){\r\n      savedItems = savedFavorites;\r\n      savedItems.forEach(function(item) {\r\n        addFavorite(item.title, item.url, item.bgImg, NTInstance);\r\n      });\r\n      }\r\n};\r\n\r\nlet loadPopularFavorites = function (NTInstance) {\r\n    var popFavs = getPopularFavorites();\r\n    popFavs.then(function(res) {\r\n      var response = JSON.parse(res);\r\n      createPopularFavs(response, NTInstance);\r\n    });\r\n};\r\nlet loadDefaultFavorites = function (NTInstance) {\r\n    var popFavs = Util.getPromise(\"/newtab/defaultFavs.json\");\r\n    popFavs.then(function(res) {\r\n      var response = JSON.parse(res);\r\n      createDefaultFavs(response, NTInstance);\r\n    });\r\n};\r\n\r\nlet createDefaultFavs = function (favorites, NTInstance) {\r\n    var list = favorites.default_favorites;\r\n    // console.log(list);\r\n    for(var i = 0; i < list.length; i++){\r\n      var entry = {\r\n        \"title\" : list[i].title,\r\n        \"url\" : list[i].url,\r\n        \"bgImg\" : list[i].bgImg,\r\n      };\r\n      // console.log(entry);\r\n      saveFavorite(entry, NTInstance);\r\n    }\r\n};\r\n\r\nlet createPopularFavs = function (favorites, NTInstance) {\r\n    // console.log(NTInstance, favorites);\r\n    var list = favorites.popular_favorites;\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    var match = [];\r\n    //console.log(NTInstance);\r\n    for(var i = 0; i < list.length; i++){\r\n      if(savedFavorites !== null){\r\n      match = $.grep(savedFavorites, function(e) {\r\n        return e.url === list[i].url;\r\n      });\r\n      }\r\n\r\n      if(match.length === 0){\r\n        var favHTML = \"<a href='#' class='popFav' data-title=\" + list[i].title + \" data-url=\" + list[i].url + \" data-imgurl=\" + list[i].bgImg +\">\" + list[i].title + \"</a>\";\r\n        $(\".popularFavs\").append(favHTML);\r\n      }\r\n    }\r\n};\r\n\r\nmodule.exports = {\r\n\r\n  addFavorite,\r\n  saveFavorite,\r\n  getPopularFavorites,\r\n  deleteFavorite,\r\n  loadSavedFavorites,\r\n  loadPopularFavorites,\r\n  loadDefaultFavorites,\r\n  createDefaultFavs,\r\n  createPopularFavs\r\n};\r\n","// import $ from \"jquery\";\r\nvar background = chrome.extension.getBackgroundPage();\r\nvar NTInstance = background.NTInstance;\r\nNTInstance.editing = false;\r\nNTInstance.currentSettings = {\r\n  \"theme\" : \"light\",\r\n  \"font\" : \"Work Sans\",\r\n  \"hover\" : \"hoverPop\",\r\n  \"background\" : null,\r\n  \"faveSize\" : \"80\"\r\n};\r\n\r\nconst Actions = require(\"./actions.js\");\r\nconst Calendar = require(\"./createCalendar.js\");\r\nconst Favorites = require(\"./favorites.js\");\r\nconst Util = require(\"./util.js\");\r\n$(document).ready(function() {\r\n\r\n  Actions.loadUserSettings(NTInstance);\r\n  Favorites.loadSavedFavorites(NTInstance);\r\n  Favorites.loadPopularFavorites(NTInstance);\r\n  Actions.setUserSettings(NTInstance.currentSettings);\r\n  var calendar = Calendar.buildCalendar();\r\n\r\n  $(\".calendar-head\").html(\"<span>\" + Calendar.month_name[Calendar.month] + \" \" + Calendar.year + \"</span\");\r\n  $(\".calendar\").append(calendar);\r\n  $(\"#favorites\").sortable();\r\n  $(\"#favorites\").sortable(\"disable\");\r\n\r\n  chrome.runtime.sendMessage({task: \"checkFirstRun\"}, function(res) {\r\n    if(res.firstRun){\r\n      Actions.showInitialLoad();\r\n      Favorites.loadDefaultFavorites(NTInstance);\r\n      Actions.triggerModal($(\".onboardingModal\"));\r\n      $(\"#obInputTitle\").focus();\r\n    }\r\n\r\n    // Hide edit icons\r\n    $(\".favorite\").children().hide();\r\n  });\r\n\r\n  // Refresh time every second\r\n  var currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n  $('#time').html(currentTime);\r\n  var currentDate = new Date().toDateString();\r\n  $('#date').html(currentDate);\r\n  setInterval(function(){\r\n    currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n    $('#time').html(currentTime);\r\n  }, 1000);\r\n\r\n  /*\r\n    Handlers for the top right main user actions menu\r\n  */\r\n  $(document).on(\"click\", \".userAction\", function(e) {\r\n     e.preventDefault();\r\n     var clickElement = $(this).attr('id');\r\n     //console.log(clickElement);\r\n     switch(clickElement) {\r\n        case \"addFavorite\":\r\n          if($(\".addModal .popularFavs\").children().length === 0){\r\n            $(\".addExtra\").hide();\r\n          }\r\n          var modalToOpen = $(\".addModal\");\r\n          Actions.triggerModal(modalToOpen);\r\n          $(\"#inputTitle\").focus();\r\n          break;\r\n\r\n        case 'editMode':\r\n          e.preventDefault();\r\n          NTInstance.editing = !NTInstance.editing;\r\n          $(\".favorite\").toggleClass(\"editing\");\r\n          $(\".favorite\").children().toggle();\r\n          if(NTInstance.editing){\r\n            Actions.triggerEditMode();\r\n          }\r\n          else{\r\n            Actions.processEditedList(NTInstance);\r\n          }\r\n          break;\r\n\r\n        case 'openSettings':\r\n          e.preventDefault();\r\n          var settingsModal = $(\".settingsModal\");\r\n          Actions.triggerModal(settingsModal);\r\n\r\n          break;\r\n\r\n        case 'openOnboarding':\r\n          e.preventDefault();\r\n          var onBoardingModal = $(\".onboardingModal\");\r\n          Actions.triggerModal(onBoardingModal);\r\n          break;\r\n\r\n        case 'openCalendar':\r\n          e.preventDefault();\r\n          var calendarModal = $(\".calendarModal\");\r\n          Actions.triggerModal(calendarModal);\r\n          break;\r\n     }\r\n  });\r\n\r\n  /*\r\n    Handler for the suggested favorites in the Add New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".popFav\", function(e){\r\n    e.preventDefault();\r\n    var selection = $(this)[0];\r\n    var titletoAdd = selection.dataset.title;\r\n    var urltoAdd = selection.dataset.url;\r\n    var imgtoAdd = selection.dataset.imgurl;\r\n\r\n    var newEntry = {\r\n      \"title\" : titletoAdd,\r\n      \"url\" : urltoAdd,\r\n      \"bgImg\" : imgtoAdd\r\n    };\r\n    Favorites.saveFavorite(newEntry, NTInstance);\r\n    $(this).remove();\r\n    if($(\".addModal .popularFavs\").children().length === 0 || $(\".onboardingModal .popularFavs\").children().length === 0) {\r\n      $(\".addExtra, .popularFavs\").hide();\r\n    }\r\n  });\r\n/*\r\n  Handler for close button\r\n*/\r\n  $(document).on(\"click\", \".closeBtn\", function(e) {\r\n    e.preventDefault();\r\n    var modalToClose = $(this).closest(\".modal\");\r\n    Actions.closeModal(modalToClose);\r\n  });\r\n\r\n  /*\r\n    Handler for the add button on the Add a New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".addBtn\",  function(e){\r\n    e.preventDefault();\r\n    var titleVal = $(\"#inputTitle\").val();\r\n    var urlVal = $(\"#inputUrl\").val();\r\n    urlVal = Util.addHttp(urlVal);\r\n    var isValidURL = Util.validateURL(urlVal);\r\n    if(!isValidURL) {\r\n      $(\".addFormError\").css(\"color\", \"red\");\r\n      $(\".addFormError\").text(\"Please enter a valid URL\").show();\r\n    }\r\n    var imageVal = $(\"#inputImage\").val();\r\n    imageVal = Util.addHttp(imageVal);\r\n    var isValidImgURL = Util.validateURL(imageVal);\r\n    if(!isValidImgURL) {\r\n      $(\".addFormError\").text(\"Please enter a valid Image URL\").show();\r\n    }\r\n    if(!isValidURL && !isValidImgURL) {\r\n      $(\".addFormError\").text(\"Please enter a valid URL & Image URL\").show();\r\n    }\r\n    if((titleVal !== \"\") && (urlVal !== \"\" && isValidURL) && (imageVal !== \"\" && isValidImgURL)){\r\n      var newEntry = {\r\n        \"title\" : titleVal,\r\n        \"url\" : urlVal,\r\n        \"bgImg\" : imageVal\r\n      };\r\n      Favorites.saveFavorite(newEntry);\r\n\r\n      if ($(\".modal\").length !== null) {\r\n        Actions.closeModal($(\".modal\"));\r\n      }\r\n      $(\".addFormError\").hide();\r\n    }\r\n    else {\r\n      $(\".addFormError\").show();\r\n    }\r\n  });\r\n  /*\r\n    Handler for the accept changes in edit favorite menu\r\n  */\r\n  // $(document).on(\"click\", \".editBtn\", function(e){\r\n  //   var itemToEdit = NTInstance.editedItem;\r\n  //   console.log(itemToEdit);\r\n  //   e.preventDefault();\r\n  //   var titleVal = itemToEdit[0].dataset.title;\r\n  //   var urlVal = $(\"#editInputUrl\").val();\r\n  //   var imageVal = $(\"#editInputImage\").val();\r\n  //   var newEntry = {\r\n  //     \"title\" : titleVal,\r\n  //     \"url\" : urlVal,\r\n  //     \"bgImg\" : imageVal\r\n  //   };\r\n  //   saveFavorite(newEntry);\r\n  //\r\n  //   var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  //   for (var i = 0; i < savedFavorites.length; i++) {\r\n  //     if(savedFavorites[i].url === itemToEdit.url) {\r\n  //       savedFavorites.splice(i, 1);\r\n  //     }\r\n  //   }\r\n  //   NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n  //   if ($(\".modal\").length !== null) {\r\n  //     closeModal($(\".modal\"));\r\n  //   }\r\n  //   $(itemToEdit).remove();\r\n  //   NTInstance.editedItem = null;\r\n  // });\r\n\r\n\r\n  $(document).on(\"click\", \".updateBtn\", function() {\r\n    var newImageURL = $(\"input[name=themeBGImage]\").val();\r\n    var isValidURL = Util.validateURL(newImageURL);\r\n    if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", newImageURL);\r\n      $(\"body\").css(\"background-image\", \"url('\" + newImageURL + \"')\");\r\n    }\r\n    else {\r\n      $(\".bgURLError\").show();\r\n    }\r\n  });\r\n  $(document).on(\"click\", \".removeBtn\", function() {\r\n    $(\"input[name=themeBGImage]\").val(\"\");\r\n    // var isValidURL = validateURL(newImageURL);\r\n    // if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", null);\r\n      $(\"body\").css(\"background-image\", \"none\");\r\n      $(\".bgURLError\").hide();\r\n    // }\r\n  });\r\n\r\n  $('input[type=radio][name=theme-select]').change(function() {\r\n    NTInstance.setSetting(\"userTheme\", this.value);\r\n    if (this.value == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span, .addFormError\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n\r\n    }\r\n    else if (this.value == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n\r\n    }\r\n  });\r\n\r\n\r\n  $(document).on(\"change\", \".hoverOption\", function() {\r\n    var hoverSelected = $(this).val();\r\n    Actions.setHover(hoverSelected, NTInstance);\r\n  });\r\n  $(document).on(\"change\", \".fontOption\", function() {\r\n    var fontSelected = $(this).val();\r\n    Actions.setFont(fontSelected, NTInstance);\r\n  });\r\n  $(document).on(\"change\", \".favoriteSize\", function() {\r\n    var sizeSelected = $(this).val();\r\n    Actions.setSize(sizeSelected, NTInstance);\r\n  });\r\n  $(document).on(\"change\", \".themeBGImageRepeat\", function() {\r\n    var bgStyleSelected = $(this).val();\r\n    Actions.setBGStyle(bgStyleSelected, NTInstance);\r\n  });\r\n  /*\r\n    Handlers for edit mode options on each of the favorites\r\n  */\r\n  $(document).on(\"click\", \".optDel\", function(e) {\r\n    e.preventDefault();\r\n    var favorite = $(this).parent();\r\n    var linkToDelete = favorite.attr(\"href\");\r\n    Favorites.deleteFavorite(linkToDelete, NTInstance);\r\n    $(this).parent().remove();\r\n  });\r\n  // $(document).on(\"click\", \".optEdit\", function(e) {\r\n  //   e.preventDefault();\r\n  //   // Open Edit Modal\r\n  //   NTInstance.editedItem = $(this).parent();\r\n  //   var favorite = $(this).parent();\r\n  //   $(\".editedItem\").text(favorite[0].dataset.title);\r\n  //   favorite.addClass(\"changingVals\");\r\n  //   triggerModal($(\".editModal\"));\r\n  //   $(\"#editInputUrl\").focus();\r\n  //\r\n  // });\r\n  $(document).on(\"click\", \".favorite\", function(e) {\r\n    if($(this).hasClass(\"editing\"))\r\n      e.preventDefault();\r\n  });\r\n});\r\n","let getPromise = function(url) {\r\n  return $.ajax({\r\n    url: url,\r\n    method: \"GET\"\r\n  });\r\n};\r\n\r\nlet validateURL = function (url) {\r\n  // var regex = \"\";\r\n  // console.log(typeof regex, url.match(regex));\r\n  if(url.match(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/) === null){\r\n    return false;\r\n  }\r\n  else return true;\r\n};\r\n\r\nlet addHttp = function (url) {\r\n  var newUrl;\r\n  if(url.match(/^(https?:\\/\\/)/) === null){\r\n    var addHttp = \"http://\";\r\n    newUrl = addHttp.concat(url);\r\n    return newUrl;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nmodule.exports = {\r\n  getPromise,\r\n  validateURL,\r\n  addHttp\r\n};\r\n"],"sourceRoot":"/source/"}