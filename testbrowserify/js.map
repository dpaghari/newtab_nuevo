{"version":3,"sources":["js","node_modules/browserify/node_modules/browser-pack/_prelude.js","js/createCalendar.js","js/newtab.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","buildCalendar","tr","document","createElement","c","td","daysOfTheWeek","innerHTML","appendChild","table","day_no","count","today","classList","add","days","d","Date","month_name","month","getMonth","year","getFullYear","getDate","first_date","tmp","toDateString","first_day","substring","day_name","indexOf","calendar","2","deleteFavorite","delUrl","savedFavorites","NTInstance","getSetting","forEach","item","index","url","splice","setSetting","loadSavedFavorites","savedItems","addFavorite","title","bgImg","loadPopularFavorites","popFavs","getPopularFavorites","then","res","response","JSON","parse","createPopularFavs","loadDefaultFavorites","getPromise","createDefaultFavs","favorites","list","default_favorites","entry","saveFavorite","popular_favorites","match","$","grep","favHTML","append","triggerModal","modal","fadeIn","closeModal","fadeOut","imageUrl","newListEntry","newFavorite","href","get","done","style","backgroundImage","fail","backgroundSize","backgroundPosition","backgroundRepeat","currentSettings","hover","dataset","optDel","children","hide","currentSaved","push","val","ajax","method","triggerEditMode","sortable","processEditedList","reorderedList","processedList","newEntry","childNodes","validateURL","addHttp","newUrl","concat","loadUserSettings","userTheme","userFont","userHover","userBGImg","theme","font","background","setUserSettings","settings","css","not","radios","each","el","attr","showInitialLoad","$onboarding","temp","html","setTimeout","chrome","extension","getBackgroundPage","editing","ready","runtime","sendMessage","task","firstRun","focus","currentTime","toLocaleTimeString","navigator","language","hour","minute","currentDate","setInterval","on","preventDefault","clickElement","this","modalToOpen","toggleClass","toggle","settingsModal","onBoardingModal","calendarModal","selection","titletoAdd","urltoAdd","imgtoAdd","imgurl","remove","modalToClose","closest","parent","titleVal","urlVal","isValidURL","text","show","imageVal","isValidImgURL","newImageURL","change","value","hoverSelected","addClass","removeClass","newFontStack","fontSelected","favorite","linkToDelete","hasClass","./createCalendar.js"],"mappings":"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","file":"js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// Calendar\r\nlet d = new Date();\r\nlet month_name = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\nlet month = d.getMonth(); // 0 - 11\r\nlet year = d.getFullYear(); // 2016\r\nlet today = d.getDate();\r\nlet first_date = month_name[month] + \" \" + 1 + \" \" + year;\r\nlet tmp = new Date(first_date).toDateString();\r\nlet first_day = tmp.substring(0, 3);\r\nlet day_name = ['Sun', 'Mon', \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\nlet day_no = day_name.indexOf(first_day);\r\nlet days = new Date(year, month+1, 0).getDate();\r\nlet table = document.createElement(\"table\");\r\nlet tr = document.createElement(\"tr\");\r\nfunction buildCalendar() {\r\n\r\nvar tr = document.createElement(\"tr\");\r\n// Row for day letters\r\nfor(var c = 0; c <= 6; c++) {\r\n  var td = document.createElement(\"td\");\r\n  var daysOfTheWeek = [\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];\r\n  td.innerHTML = daysOfTheWeek[c];\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// Row for blank spaces\r\ntr = document.createElement(\"tr\");\r\nfor(c = 0;c <= 6; c++) {\r\n  if(c === day_no) {\r\n    break;\r\n  }\r\n  var td = document.createElement(\"td\");\r\n  td.innerHTML = \"\";\r\n  tr.appendChild(td);\r\n}\r\n\r\n// Start counting days of the month\r\nvar count = 1;\r\nfor(; c <=6; c++) {\r\n  // console.log(c);\r\n  var td = document.createElement(\"td\");\r\n\r\n  td.innerHTML = \"<span>\" + count + \"</span>\";\r\n  //console.log(count, today);\r\n  if(count === today){\r\n    td.classList.add(\"currentDay\");\r\n  }\r\n\r\n  count++;\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// rest of the date rows\r\nfor(var r=3; r<= 6; r++) {\r\n  tr = document.createElement(\"tr\");\r\n  for(var c = 0; c <= 6;c++) {\r\n    if(count > days) {\r\n      table.appendChild(tr);\r\n      return table;\r\n    }\r\n    var td = document.createElement(\"td\");\r\n    td.innerHTML = \"<span>\" + count + \"</span>\";\r\n    if(count === today){\r\n      td.classList.add(\"currentDay\");\r\n    }\r\n    count++;\r\n    tr.appendChild(td);\r\n  }\r\n  table.appendChild(tr);\r\n}\r\n}\r\n\r\nvar calendar = buildCalendar();\r\nmodule.exports = calendar;\r\n\n},{}],2:[function(require,module,exports){\nvar calendar = require(\"./createCalendar.js\");\r\n\r\nvar background = chrome.extension.getBackgroundPage();\r\nvar NTInstance = background.NTInstance;\r\nNTInstance.editing = false;\r\nNTInstance.currentSettings = {\r\n  \"theme\" : \"light\",\r\n  \"font\" : \"Work Sans\",\r\n  \"hover\" : \"hoverPop\",\r\n  \"background\" : null\r\n};\r\n\r\n$(document).ready(function() {\r\n\r\n  loadUserSettings();\r\n  setUserSettings(NTInstance.currentSettings);\r\n  loadPopularFavorites();\r\n  loadSavedFavorites();\r\n  // var calendar = buildCalendar();\r\n  $(\".calendar-head\").html(\"<span>\" + month_name[month] + \" \" + year + \"</span\");\r\n  $(\".calendar\").append(calendar);\r\n  $(\"#favorites\").sortable();\r\n  $(\"#favorites\").sortable(\"disable\");\r\n\r\n  chrome.runtime.sendMessage({task: \"checkFirstRun\"}, function(res) {\r\n    if(res.firstRun){\r\n      showInitialLoad();\r\n      loadDefaultFavorites();\r\n      triggerModal($(\".onboardingModal\"));\r\n      $(\"#obInputTitle\").focus();\r\n    }\r\n\r\n    // Hide edit icons\r\n    $(\".favorite\").children().hide();\r\n  });\r\n\r\n  // Refresh time every second\r\n  var currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n  $('#time').html(currentTime);\r\n  var currentDate = new Date().toDateString();\r\n  $('#date').html(currentDate);\r\n  setInterval(function(){\r\n    currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n    $('#time').html(currentTime);\r\n  }, 1000);\r\n\r\n  /*\r\n    Handlers for the top right main user actions menu\r\n  */\r\n  $(document).on(\"click\", \".userAction\", function(e) {\r\n     e.preventDefault();\r\n     var clickElement = $(this).attr('id');\r\n     //console.log(clickElement);\r\n     switch(clickElement) {\r\n        case \"addFavorite\":\r\n          if($(\".addModal .popularFavs\").children().length === 0){\r\n            $(\".addExtra\").hide();\r\n          }\r\n          var modalToOpen = $(\".addModal\");\r\n          triggerModal(modalToOpen);\r\n          $(\"#inputTitle\").focus();\r\n          break;\r\n\r\n        case 'editMode':\r\n          e.preventDefault();\r\n          NTInstance.editing = !NTInstance.editing;\r\n          $(\".favorite\").toggleClass(\"editing\");\r\n          $(\".favorite\").children().toggle();\r\n          if(NTInstance.editing){\r\n            triggerEditMode();\r\n          }\r\n          else{\r\n            processEditedList();\r\n          }\r\n          break;\r\n\r\n        case 'openSettings':\r\n          e.preventDefault();\r\n          var settingsModal = $(\".settingsModal\");\r\n          triggerModal(settingsModal);\r\n\r\n          break;\r\n\r\n        case 'openOnboarding':\r\n          e.preventDefault();\r\n          var onBoardingModal = $(\".onboardingModal\");\r\n          triggerModal(onBoardingModal);\r\n          break;\r\n\r\n        case 'openCalendar':\r\n          e.preventDefault();\r\n          var calendarModal = $(\".calendarModal\");\r\n          triggerModal(calendarModal);\r\n          break;\r\n     }\r\n  });\r\n\r\n  /*\r\n    Handler for the suggested favorites in the Add New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".popFav\", function(e){\r\n    e.preventDefault();\r\n    var selection = $(this)[0];\r\n    var titletoAdd = selection.dataset.title;\r\n    var urltoAdd = selection.dataset.url;\r\n    var imgtoAdd = selection.dataset.imgurl;\r\n\r\n    var newEntry = {\r\n      \"title\" : titletoAdd,\r\n      \"url\" : urltoAdd,\r\n      \"bgImg\" : imgtoAdd\r\n    };\r\n    // console.log(newEntry);\r\n    saveFavorite(newEntry);\r\n    // console.log($(this).closest(\".popularFavs\"));\r\n    $(this).remove();\r\n    if($(\".addModal .popularFavs\").children().length === 0 || $(\".onboardingModal .popularFavs\").children().length === 0) {\r\n      $(\".addExtra\").hide();\r\n    }\r\n  });\r\n/*\r\n  Handler for close button\r\n*/\r\n  $(document).on(\"click\", \".closeBtn\", function(e) {\r\n    e.preventDefault();\r\n    var modalToClose = $(this).closest(\".modal\");\r\n    closeModal(modalToClose);\r\n  });\r\n  $(document).on(\"click\", \".closeEdit\", function(e) {\r\n    e.preventDefault();\r\n    var modalToClose = $(this).parent();\r\n    closeModal(modalToClose);\r\n  });\r\n\r\n  $(document).on(\"click\", '.arrowContainer', function() {\r\n    $(this).remove();\r\n  });\r\n\r\n  /*\r\n    Handler for the add button on the Add a New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".addBtn\",  function(e){\r\n    e.preventDefault();\r\n    var titleVal = $(\"#inputTitle\").val();\r\n    var urlVal = $(\"#inputUrl\").val();\r\n    urlVal = addHttp(urlVal);\r\n    var isValidURL = validateURL(urlVal);\r\n\r\n    if(!isValidURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid URL\").show();\r\n    }\r\n    var imageVal = $(\"#inputImage\").val();\r\n    imageVal = addHttp(imageVal);\r\n    var isValidImgURL = validateURL(imageVal);\r\n    if(!isValidImgURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid Image URL\").show();\r\n    }\r\n    if(!isValidURL && !isValidImgURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid URL & Image URL\").show();\r\n    }\r\n    if((titleVal !== \"\") && (urlVal !== \"\" && isValidURL) && (imageVal !== \"\" && isValidImgURL)){\r\n      var newEntry = {\r\n        \"title\" : titleVal,\r\n        \"url\" : urlVal,\r\n        \"bgImg\" : imageVal\r\n      };\r\n      saveFavorite(newEntry);\r\n\r\n      if ($(\".modal\").length !== null) {\r\n        closeModal($(\".modal\"));\r\n      }\r\n      $(\"#addFormError\").hide();\r\n    }\r\n    else {\r\n      $(\"#addFormError\").show();\r\n    }\r\n  });\r\n  /*\r\n    Handler for the accept changes in edit favorite menu\r\n  */\r\n  // $(document).on(\"click\", \".editBtn\", function(e){\r\n  //   var itemToEdit = NTInstance.editedItem;\r\n  //   console.log(itemToEdit);\r\n  //   e.preventDefault();\r\n  //   var titleVal = itemToEdit[0].dataset.title;\r\n  //   var urlVal = $(\"#editInputUrl\").val();\r\n  //   var imageVal = $(\"#editInputImage\").val();\r\n  //   var newEntry = {\r\n  //     \"title\" : titleVal,\r\n  //     \"url\" : urlVal,\r\n  //     \"bgImg\" : imageVal\r\n  //   };\r\n  //   saveFavorite(newEntry);\r\n  //\r\n  //   var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  //   for (var i = 0; i < savedFavorites.length; i++) {\r\n  //     if(savedFavorites[i].url === itemToEdit.url) {\r\n  //       savedFavorites.splice(i, 1);\r\n  //     }\r\n  //   }\r\n  //   NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n  //   if ($(\".modal\").length !== null) {\r\n  //     closeModal($(\".modal\"));\r\n  //   }\r\n  //   $(itemToEdit).remove();\r\n  //   NTInstance.editedItem = null;\r\n  // });\r\n\r\n\r\n  $(document).on(\"click\", \".updateBtn\", function() {\r\n    var newImageURL = $(\"input[name=themeBGImage]\").val();\r\n    var isValidURL = validateURL(newImageURL);\r\n    if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", newImageURL);\r\n      $(\"body\").css(\"background-image\", \"url('\" + newImageURL + \"')\");\r\n    }\r\n    else {\r\n      $(\".bgURLError\").show();\r\n    }\r\n  });\r\n  $(document).on(\"click\", \".removeBtn\", function() {\r\n    $(\"input[name=themeBGImage]\").val(\"\");\r\n    // var isValidURL = validateURL(newImageURL);\r\n    // if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", null);\r\n      $(\"body\").css(\"background-image\", \"none\");\r\n      $(\".bgURLError\").hide();\r\n    // }\r\n  });\r\n\r\n  $('input[type=radio][name=theme-select]').change(function() {\r\n    NTInstance.setSetting(\"userTheme\", this.value);\r\n    if (this.value == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n\r\n    }\r\n    else if (this.value == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n\r\n    }\r\n  });\r\n\r\n\r\n  $(document).on(\"change\", \".hoverOption\", function() {\r\n    var hoverSelected = $(this).val();\r\n    switch(hoverSelected) {\r\n\r\n      case \"hoverPop\":\r\n      NTInstance.setSetting(\"userHover\", \"hoverPop\");\r\n      $(\".favorite\").addClass(\"hoverPop\").removeClass(\"hoverNone hoverHighlight\");\r\n      break;\r\n\r\n      case \"hoverHighlight\":\r\n      NTInstance.setSetting(\"userHover\", \"hoverHighlight\");\r\n      $(\".favorite\").addClass(\"hoverHighlight\").removeClass(\"hoverNone hoverPop\");\r\n      break;\r\n\r\n      case \"hoverNone\":\r\n      NTInstance.setSetting(\"userHover\", \"hoverNone\");\r\n      $(\".favorite\").addClass(\"hoverNone\").removeClass(\"hoverPop hoverHighlight\");\r\n      break;\r\n    }\r\n  });\r\n  $(document).on(\"change\", \".fontOption\", function() {\r\n    // console.log($(this).val());\r\n    var fontSelected = $(this).val();\r\n    var newFontStack;\r\n    switch(fontSelected) {\r\n      case \"Montserrat\":\r\n      newFontStack = \"Montserrat\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"BebasNeue\":\r\n      newFontStack = \"BebasNeue\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Roboto Mono\":\r\n      newFontStack = \"Roboto Mono\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Raleway\":\r\n      newFontStack = \"Raleway\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Pridi\":\r\n      newFontStack = \"Pridi\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Work Sans\":\r\n      newFontStack = \"Work Sans\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Mitr\":\r\n      newFontStack = \"Mitr\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Museo Sans\":\r\n      newFontStack = \"MuseoSans\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n    }\r\n  });\r\n\r\n  /*\r\n    Handlers for edit mode options on each of the favorites\r\n  */\r\n  $(document).on(\"click\", \".optDel\", function(e) {\r\n    e.preventDefault();\r\n    var favorite = $(this).parent();\r\n    var linkToDelete = favorite.attr(\"href\");\r\n    deleteFavorite(linkToDelete);\r\n    $(this).parent().remove();\r\n  });\r\n  // $(document).on(\"click\", \".optEdit\", function(e) {\r\n  //   e.preventDefault();\r\n  //   // Open Edit Modal\r\n  //   NTInstance.editedItem = $(this).parent();\r\n  //   var favorite = $(this).parent();\r\n  //   $(\".editedItem\").text(favorite[0].dataset.title);\r\n  //   favorite.addClass(\"changingVals\");\r\n  //   triggerModal($(\".editModal\"));\r\n  //   $(\"#editInputUrl\").focus();\r\n  //\r\n  // });\r\n  $(document).on(\"click\", \".favorite\", function(e) {\r\n    if($(this).hasClass(\"editing\"))\r\n      e.preventDefault();\r\n  });\r\n});\r\n\r\n\r\nfunction deleteFavorite(delUrl) {\r\n  var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  if(savedFavorites !== null){\r\n  savedFavorites.forEach(function(item, index) {\r\n    if(item.url === delUrl) {\r\n      savedFavorites.splice(index, 1);\r\n    }\r\n\r\n  });\r\n  NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n  }\r\n}\r\n\r\n// Load saved favorites onload\r\nfunction loadSavedFavorites() {\r\n  var savedItems = [];\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n    savedItems = savedFavorites;\r\n    savedItems.forEach(function(item) {\r\n      addFavorite(item.title, item.url, item.bgImg);\r\n    });\r\n    }\r\n}\r\n\r\nfunction loadPopularFavorites() {\r\n  var popFavs = getPopularFavorites();\r\n  popFavs.then(function(res) {\r\n    var response = JSON.parse(res);\r\n    createPopularFavs(response);\r\n  });\r\n}\r\nfunction loadDefaultFavorites() {\r\n  var popFavs = getPromise(\"/newtab/defaultFavs.json\");\r\n  popFavs.then(function(res) {\r\n    var response = JSON.parse(res);\r\n    createDefaultFavs(response);\r\n  });\r\n}\r\n\r\nfunction createDefaultFavs(favorites) {\r\n  var list = favorites.default_favorites;\r\n  // console.log(list);\r\n  for(var i = 0; i < list.length; i++){\r\n    var entry = {\r\n      \"title\" : list[i].title,\r\n      \"url\" : list[i].url,\r\n      \"bgImg\" : list[i].bgImg,\r\n    };\r\n    // console.log(entry);\r\n    saveFavorite(entry);\r\n  }\r\n}\r\n\r\nfunction createPopularFavs(favorites) {\r\n  var list = favorites.popular_favorites;\r\n  var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  var match = [];\r\n  //console.log(NTInstance);\r\n  for(var i = 0; i < list.length; i++){\r\n    if(savedFavorites !== null){\r\n    match = $.grep(savedFavorites, function(e) {\r\n      return e.url === list[i].url;\r\n    });\r\n    }\r\n    // var popularFav = {\r\n    //   \"title\" : list[i].title,\r\n    //   \"url\" : list[i].url,\r\n    //   \"bgImg\" : list[i].bgImg\r\n    // };\r\n\r\n    if(match.length === 0){\r\n      var favHTML = \"<a href='#' class='popFav' data-title=\" + list[i].title + \" data-url=\" + list[i].url + \" data-imgurl=\" + list[i].bgImg +\">\" + list[i].title + \"</a>\";\r\n      $(\".popularFavs\").append(favHTML);\r\n    }\r\n  }\r\n}\r\n\r\n// Prompt user for image to use for bookmark\r\n// and also the url.  Append to favorites\r\nfunction triggerModal(modal) {\r\n  $('.lightbox').fadeIn();\r\n  modal.fadeIn();\r\n}\r\n\r\nfunction closeModal(modal) {\r\n  $('.lightbox').fadeOut();\r\n  modal.fadeOut();\r\n}\r\n// Add a new favorite to the favorites grid\r\nfunction addFavorite(title, url, imageUrl) {\r\n  var newListEntry = document.createElement(\"LI\");\r\n  var newFavorite = document.createElement(\"A\");\r\n  newFavorite.href = url;\r\n  // console.log(imageExists(imageUrl));\r\n  $.get(imageUrl)\r\n    .done(function() {\r\n      newFavorite.style.backgroundImage = \"url(\" + imageUrl + \")\";\r\n    }).fail(function() {\r\n      newFavorite.style.backgroundImage = \"url('/newtab/images/placeholder.png')\";\r\n  });\r\n  newFavorite.style.backgroundSize = \"cover\";\r\n  newFavorite.style.backgroundPosition = \"center center\";\r\n  newFavorite.style.backgroundRepeat = \"no-repeat\";\r\n  newFavorite.classList.add(\"favorite\", NTInstance.currentSettings.hover);\r\n  newFavorite.dataset.title = title;\r\n  newFavorite.dataset.bgImg = imageUrl;\r\n  var optDel = document.createElement(\"I\");\r\n  optDel.classList.add(\"fa\", \"fa-trash-o\", \"fa-lg\", \"fa-fw\", \"optDel\");\r\n  // var optEdit = document.createElement(\"I\");\r\n  // optEdit.classList.add(\"fa\", \"fa-pencil\", \"fa-lg\", \"fa-fw\", \"optEdit\");\r\n  newFavorite.appendChild(optDel);\r\n  // newFavorite.appendChild(optEdit);\r\n  newListEntry.appendChild(newFavorite);\r\n  $(\"#favorites\").append(newListEntry);\r\n  $(\".favorite\").children().hide();\r\n}\r\n\r\n\r\n// Save favorite to local storage\r\nfunction saveFavorite(entry) {\r\n  var currentSaved = [];\r\n  var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  if(savedFavorites !== null){\r\n    currentSaved = savedFavorites;\r\n  }\r\n  currentSaved.push(entry);\r\n  NTInstance.setSetting(\"savedFavorites\" , currentSaved);\r\n  addFavorite(entry.title, entry.url, entry.bgImg);\r\n  $(\"#inputUrl\").val(\"\");\r\n  $(\"#inputImage\").val(\"\");\r\n}\r\n\r\nfunction getPopularFavorites() {\r\n  return $.ajax({\r\n    url: \"./popularFavs.json\",\r\n    method: \"GET\"\r\n  });\r\n}\r\nfunction getPromise(url) {\r\n  return $.ajax({\r\n    url: url,\r\n    method: \"GET\"\r\n  });\r\n}\r\nfunction triggerEditMode() {\r\n  $(\"#favorites\").sortable(\"enable\");\r\n}\r\n\r\nfunction processEditedList() {\r\n  var reorderedList = $(\"#favorites\").children();\r\n  var processedList = [];\r\n  for (var i = 0; i < reorderedList.length; i++) {\r\n    var newEntry = {\r\n      \"title\": reorderedList[i].childNodes[0].dataset.title,\r\n      \"url\": reorderedList[i].childNodes[0].href,\r\n      \"bgImg\": reorderedList[i].childNodes[0].dataset.bgImg\r\n    };\r\n    processedList.push(newEntry);\r\n  }\r\n  NTInstance.setSetting(\"savedFavorites\", processedList);\r\n  $(\"#favorites\").sortable(\"disable\");\r\n\r\n}\r\n\r\nfunction validateURL(url) {\r\n  // var regex = \"\";\r\n  // console.log(typeof regex, url.match(regex));\r\n  if(url.match(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/) === null){\r\n    return false;\r\n  }\r\n  else return true;\r\n}\r\n\r\nfunction addHttp(url) {\r\n  var newUrl;\r\n  if(url.match(/^(https?:\\/\\/)/) === null){\r\n    var addHttp = \"http://\";\r\n    newUrl = addHttp.concat(url);\r\n    return newUrl;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\nfunction loadUserSettings() {\r\n  var userTheme = NTInstance.getSetting(\"userTheme\", \"light\");\r\n  var userFont = NTInstance.getSetting(\"userFont\", \"Work Sans\");\r\n  var userHover = NTInstance.getSetting(\"userHover\", \"hoverPop\");\r\n  var userBGImg = NTInstance.getSetting(\"userThemeBG\", null);\r\n  NTInstance.currentSettings = {\r\n    \"theme\" : userTheme,\r\n    \"font\" : userFont,\r\n    \"hover\" : userHover,\r\n    \"background\" : userBGImg\r\n  };\r\n  // console.log(NTInstance.currentSettings);\r\n}\r\nfunction setUserSettings(settings) {\r\n  if (settings.theme == 'light') {\r\n    $(\"body, .modal\").css(\"background\", \"white\");\r\n    $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n    $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n    $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n  }\r\n  else if (settings.theme == 'dark') {\r\n    $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n    $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n    $(\"input, select, option\").css(\"color\", \"black\");\r\n    $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n  }\r\n  $(\"*\").not(\"i\").css(\"font-family\", settings.font);\r\n  $(\"select.fontOption\").val(settings.font);\r\n  $(\"select.hoverOption\").val(settings.hover);\r\n  var radios = $(\"input[name=theme-select]\");\r\n  $(radios).each(function(i, el) {\r\n    if($(el).val() === settings.theme)\r\n      $(el).attr(\"checked\", \"checked\");\r\n  });\r\n\r\n  if(settings.background !== null) {\r\n    $(\"body\").css(\"background-image\", \"url(\" + settings.background +\")\");\r\n    $(\"input[name=themeBGImage]\").val(settings.background);\r\n  }\r\n\r\n}\r\n// TO-DO: Could probably be implemented better\r\nfunction showInitialLoad() {\r\n  var $onboarding = $(\".onboardingModal\");\r\n  var temp = $onboarding.html();\r\n  $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/cubeload.svg'/><p class='onboardGreeting'>Setting up DashTab</p>\");\r\n  setTimeout(function() {\r\n    $onboarding.children().fadeOut(\"slow\");\r\n  }, 3000);\r\n  setTimeout(function() {\r\n    $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/logo.jpg'/ alt='Dashtab Logo'><p class='onboardGreeting'>Welcome to DashTab!</p>\");\r\n  }, 3500);\r\n  setTimeout(function() {\r\n    $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n    // $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n    // $(\".modalWrapper\").fadeOut(\"slow\");\r\n  }, 6000);\r\n  setTimeout(function() {\r\n    // $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n    $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n    // $(\".modalWrapper\").fadeOut(\"slow\");\r\n  }, 6500);\r\n  setTimeout(function() {\r\n    $(\".modalWrapper\").fadeIn(\"slow\");\r\n    // $(\".onboardGreeting\").fadeOut(\"slow\");\r\n  }, 7000);\r\n}\r\n\n},{\"./createCalendar.js\":1}]},{},[2])\n\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Calendar\r\nlet d = new Date();\r\nlet month_name = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\nlet month = d.getMonth(); // 0 - 11\r\nlet year = d.getFullYear(); // 2016\r\nlet today = d.getDate();\r\nlet first_date = month_name[month] + \" \" + 1 + \" \" + year;\r\nlet tmp = new Date(first_date).toDateString();\r\nlet first_day = tmp.substring(0, 3);\r\nlet day_name = ['Sun', 'Mon', \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\nlet day_no = day_name.indexOf(first_day);\r\nlet days = new Date(year, month+1, 0).getDate();\r\nlet table = document.createElement(\"table\");\r\nlet tr = document.createElement(\"tr\");\r\nfunction buildCalendar() {\r\n\r\nvar tr = document.createElement(\"tr\");\r\n// Row for day letters\r\nfor(var c = 0; c <= 6; c++) {\r\n  var td = document.createElement(\"td\");\r\n  var daysOfTheWeek = [\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];\r\n  td.innerHTML = daysOfTheWeek[c];\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// Row for blank spaces\r\ntr = document.createElement(\"tr\");\r\nfor(c = 0;c <= 6; c++) {\r\n  if(c === day_no) {\r\n    break;\r\n  }\r\n  var td = document.createElement(\"td\");\r\n  td.innerHTML = \"\";\r\n  tr.appendChild(td);\r\n}\r\n\r\n// Start counting days of the month\r\nvar count = 1;\r\nfor(; c <=6; c++) {\r\n  // console.log(c);\r\n  var td = document.createElement(\"td\");\r\n\r\n  td.innerHTML = \"<span>\" + count + \"</span>\";\r\n  //console.log(count, today);\r\n  if(count === today){\r\n    td.classList.add(\"currentDay\");\r\n  }\r\n\r\n  count++;\r\n  tr.appendChild(td);\r\n}\r\ntable.appendChild(tr);\r\n\r\n// rest of the date rows\r\nfor(var r=3; r<= 6; r++) {\r\n  tr = document.createElement(\"tr\");\r\n  for(var c = 0; c <= 6;c++) {\r\n    if(count > days) {\r\n      table.appendChild(tr);\r\n      return table;\r\n    }\r\n    var td = document.createElement(\"td\");\r\n    td.innerHTML = \"<span>\" + count + \"</span>\";\r\n    if(count === today){\r\n      td.classList.add(\"currentDay\");\r\n    }\r\n    count++;\r\n    tr.appendChild(td);\r\n  }\r\n  table.appendChild(tr);\r\n}\r\n}\r\n\r\nvar calendar = buildCalendar();\r\nmodule.exports = calendar;\r\n","var calendar = require(\"./createCalendar.js\");\r\n\r\nvar background = chrome.extension.getBackgroundPage();\r\nvar NTInstance = background.NTInstance;\r\nNTInstance.editing = false;\r\nNTInstance.currentSettings = {\r\n  \"theme\" : \"light\",\r\n  \"font\" : \"Work Sans\",\r\n  \"hover\" : \"hoverPop\",\r\n  \"background\" : null\r\n};\r\n\r\n$(document).ready(function() {\r\n\r\n  loadUserSettings();\r\n  setUserSettings(NTInstance.currentSettings);\r\n  loadPopularFavorites();\r\n  loadSavedFavorites();\r\n  // var calendar = buildCalendar();\r\n  $(\".calendar-head\").html(\"<span>\" + month_name[month] + \" \" + year + \"</span\");\r\n  $(\".calendar\").append(calendar);\r\n  $(\"#favorites\").sortable();\r\n  $(\"#favorites\").sortable(\"disable\");\r\n\r\n  chrome.runtime.sendMessage({task: \"checkFirstRun\"}, function(res) {\r\n    if(res.firstRun){\r\n      showInitialLoad();\r\n      loadDefaultFavorites();\r\n      triggerModal($(\".onboardingModal\"));\r\n      $(\"#obInputTitle\").focus();\r\n    }\r\n\r\n    // Hide edit icons\r\n    $(\".favorite\").children().hide();\r\n  });\r\n\r\n  // Refresh time every second\r\n  var currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n  $('#time').html(currentTime);\r\n  var currentDate = new Date().toDateString();\r\n  $('#date').html(currentDate);\r\n  setInterval(function(){\r\n    currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\r\n    $('#time').html(currentTime);\r\n  }, 1000);\r\n\r\n  /*\r\n    Handlers for the top right main user actions menu\r\n  */\r\n  $(document).on(\"click\", \".userAction\", function(e) {\r\n     e.preventDefault();\r\n     var clickElement = $(this).attr('id');\r\n     //console.log(clickElement);\r\n     switch(clickElement) {\r\n        case \"addFavorite\":\r\n          if($(\".addModal .popularFavs\").children().length === 0){\r\n            $(\".addExtra\").hide();\r\n          }\r\n          var modalToOpen = $(\".addModal\");\r\n          triggerModal(modalToOpen);\r\n          $(\"#inputTitle\").focus();\r\n          break;\r\n\r\n        case 'editMode':\r\n          e.preventDefault();\r\n          NTInstance.editing = !NTInstance.editing;\r\n          $(\".favorite\").toggleClass(\"editing\");\r\n          $(\".favorite\").children().toggle();\r\n          if(NTInstance.editing){\r\n            triggerEditMode();\r\n          }\r\n          else{\r\n            processEditedList();\r\n          }\r\n          break;\r\n\r\n        case 'openSettings':\r\n          e.preventDefault();\r\n          var settingsModal = $(\".settingsModal\");\r\n          triggerModal(settingsModal);\r\n\r\n          break;\r\n\r\n        case 'openOnboarding':\r\n          e.preventDefault();\r\n          var onBoardingModal = $(\".onboardingModal\");\r\n          triggerModal(onBoardingModal);\r\n          break;\r\n\r\n        case 'openCalendar':\r\n          e.preventDefault();\r\n          var calendarModal = $(\".calendarModal\");\r\n          triggerModal(calendarModal);\r\n          break;\r\n     }\r\n  });\r\n\r\n  /*\r\n    Handler for the suggested favorites in the Add New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".popFav\", function(e){\r\n    e.preventDefault();\r\n    var selection = $(this)[0];\r\n    var titletoAdd = selection.dataset.title;\r\n    var urltoAdd = selection.dataset.url;\r\n    var imgtoAdd = selection.dataset.imgurl;\r\n\r\n    var newEntry = {\r\n      \"title\" : titletoAdd,\r\n      \"url\" : urltoAdd,\r\n      \"bgImg\" : imgtoAdd\r\n    };\r\n    // console.log(newEntry);\r\n    saveFavorite(newEntry);\r\n    // console.log($(this).closest(\".popularFavs\"));\r\n    $(this).remove();\r\n    if($(\".addModal .popularFavs\").children().length === 0 || $(\".onboardingModal .popularFavs\").children().length === 0) {\r\n      $(\".addExtra\").hide();\r\n    }\r\n  });\r\n/*\r\n  Handler for close button\r\n*/\r\n  $(document).on(\"click\", \".closeBtn\", function(e) {\r\n    e.preventDefault();\r\n    var modalToClose = $(this).closest(\".modal\");\r\n    closeModal(modalToClose);\r\n  });\r\n  $(document).on(\"click\", \".closeEdit\", function(e) {\r\n    e.preventDefault();\r\n    var modalToClose = $(this).parent();\r\n    closeModal(modalToClose);\r\n  });\r\n\r\n  $(document).on(\"click\", '.arrowContainer', function() {\r\n    $(this).remove();\r\n  });\r\n\r\n  /*\r\n    Handler for the add button on the Add a New Favorite menu\r\n  */\r\n  $(document).on(\"click\", \".addBtn\",  function(e){\r\n    e.preventDefault();\r\n    var titleVal = $(\"#inputTitle\").val();\r\n    var urlVal = $(\"#inputUrl\").val();\r\n    urlVal = addHttp(urlVal);\r\n    var isValidURL = validateURL(urlVal);\r\n\r\n    if(!isValidURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid URL\").show();\r\n    }\r\n    var imageVal = $(\"#inputImage\").val();\r\n    imageVal = addHttp(imageVal);\r\n    var isValidImgURL = validateURL(imageVal);\r\n    if(!isValidImgURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid Image URL\").show();\r\n    }\r\n    if(!isValidURL && !isValidImgURL) {\r\n      $(\"#addFormError\").text(\"Please enter a valid URL & Image URL\").show();\r\n    }\r\n    if((titleVal !== \"\") && (urlVal !== \"\" && isValidURL) && (imageVal !== \"\" && isValidImgURL)){\r\n      var newEntry = {\r\n        \"title\" : titleVal,\r\n        \"url\" : urlVal,\r\n        \"bgImg\" : imageVal\r\n      };\r\n      saveFavorite(newEntry);\r\n\r\n      if ($(\".modal\").length !== null) {\r\n        closeModal($(\".modal\"));\r\n      }\r\n      $(\"#addFormError\").hide();\r\n    }\r\n    else {\r\n      $(\"#addFormError\").show();\r\n    }\r\n  });\r\n  /*\r\n    Handler for the accept changes in edit favorite menu\r\n  */\r\n  // $(document).on(\"click\", \".editBtn\", function(e){\r\n  //   var itemToEdit = NTInstance.editedItem;\r\n  //   console.log(itemToEdit);\r\n  //   e.preventDefault();\r\n  //   var titleVal = itemToEdit[0].dataset.title;\r\n  //   var urlVal = $(\"#editInputUrl\").val();\r\n  //   var imageVal = $(\"#editInputImage\").val();\r\n  //   var newEntry = {\r\n  //     \"title\" : titleVal,\r\n  //     \"url\" : urlVal,\r\n  //     \"bgImg\" : imageVal\r\n  //   };\r\n  //   saveFavorite(newEntry);\r\n  //\r\n  //   var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  //   for (var i = 0; i < savedFavorites.length; i++) {\r\n  //     if(savedFavorites[i].url === itemToEdit.url) {\r\n  //       savedFavorites.splice(i, 1);\r\n  //     }\r\n  //   }\r\n  //   NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n  //   if ($(\".modal\").length !== null) {\r\n  //     closeModal($(\".modal\"));\r\n  //   }\r\n  //   $(itemToEdit).remove();\r\n  //   NTInstance.editedItem = null;\r\n  // });\r\n\r\n\r\n  $(document).on(\"click\", \".updateBtn\", function() {\r\n    var newImageURL = $(\"input[name=themeBGImage]\").val();\r\n    var isValidURL = validateURL(newImageURL);\r\n    if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", newImageURL);\r\n      $(\"body\").css(\"background-image\", \"url('\" + newImageURL + \"')\");\r\n    }\r\n    else {\r\n      $(\".bgURLError\").show();\r\n    }\r\n  });\r\n  $(document).on(\"click\", \".removeBtn\", function() {\r\n    $(\"input[name=themeBGImage]\").val(\"\");\r\n    // var isValidURL = validateURL(newImageURL);\r\n    // if(isValidURL) {\r\n      NTInstance.setSetting(\"userThemeBG\", null);\r\n      $(\"body\").css(\"background-image\", \"none\");\r\n      $(\".bgURLError\").hide();\r\n    // }\r\n  });\r\n\r\n  $('input[type=radio][name=theme-select]').change(function() {\r\n    NTInstance.setSetting(\"userTheme\", this.value);\r\n    if (this.value == 'light') {\r\n      $(\"body, .modal\").css(\"background\", \"white\");\r\n      $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n      $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n\r\n    }\r\n    else if (this.value == 'dark') {\r\n      $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n      $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n      $(\"input, select, option\").css(\"color\", \"black\");\r\n      $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n\r\n    }\r\n  });\r\n\r\n\r\n  $(document).on(\"change\", \".hoverOption\", function() {\r\n    var hoverSelected = $(this).val();\r\n    switch(hoverSelected) {\r\n\r\n      case \"hoverPop\":\r\n      NTInstance.setSetting(\"userHover\", \"hoverPop\");\r\n      $(\".favorite\").addClass(\"hoverPop\").removeClass(\"hoverNone hoverHighlight\");\r\n      break;\r\n\r\n      case \"hoverHighlight\":\r\n      NTInstance.setSetting(\"userHover\", \"hoverHighlight\");\r\n      $(\".favorite\").addClass(\"hoverHighlight\").removeClass(\"hoverNone hoverPop\");\r\n      break;\r\n\r\n      case \"hoverNone\":\r\n      NTInstance.setSetting(\"userHover\", \"hoverNone\");\r\n      $(\".favorite\").addClass(\"hoverNone\").removeClass(\"hoverPop hoverHighlight\");\r\n      break;\r\n    }\r\n  });\r\n  $(document).on(\"change\", \".fontOption\", function() {\r\n    // console.log($(this).val());\r\n    var fontSelected = $(this).val();\r\n    var newFontStack;\r\n    switch(fontSelected) {\r\n      case \"Montserrat\":\r\n      newFontStack = \"Montserrat\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"BebasNeue\":\r\n      newFontStack = \"BebasNeue\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Roboto Mono\":\r\n      newFontStack = \"Roboto Mono\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Raleway\":\r\n      newFontStack = \"Raleway\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Pridi\":\r\n      newFontStack = \"Pridi\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Work Sans\":\r\n      newFontStack = \"Work Sans\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Mitr\":\r\n      newFontStack = \"Mitr\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n      case \"Museo Sans\":\r\n      newFontStack = \"MuseoSans\";\r\n      NTInstance.setSetting(\"userFont\", newFontStack);\r\n      $(\"*\").not(\"i\").css(\"font-family\", newFontStack);\r\n      break;\r\n    }\r\n  });\r\n\r\n  /*\r\n    Handlers for edit mode options on each of the favorites\r\n  */\r\n  $(document).on(\"click\", \".optDel\", function(e) {\r\n    e.preventDefault();\r\n    var favorite = $(this).parent();\r\n    var linkToDelete = favorite.attr(\"href\");\r\n    deleteFavorite(linkToDelete);\r\n    $(this).parent().remove();\r\n  });\r\n  // $(document).on(\"click\", \".optEdit\", function(e) {\r\n  //   e.preventDefault();\r\n  //   // Open Edit Modal\r\n  //   NTInstance.editedItem = $(this).parent();\r\n  //   var favorite = $(this).parent();\r\n  //   $(\".editedItem\").text(favorite[0].dataset.title);\r\n  //   favorite.addClass(\"changingVals\");\r\n  //   triggerModal($(\".editModal\"));\r\n  //   $(\"#editInputUrl\").focus();\r\n  //\r\n  // });\r\n  $(document).on(\"click\", \".favorite\", function(e) {\r\n    if($(this).hasClass(\"editing\"))\r\n      e.preventDefault();\r\n  });\r\n});\r\n\r\n\r\nfunction deleteFavorite(delUrl) {\r\n  var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  if(savedFavorites !== null){\r\n  savedFavorites.forEach(function(item, index) {\r\n    if(item.url === delUrl) {\r\n      savedFavorites.splice(index, 1);\r\n    }\r\n\r\n  });\r\n  NTInstance.setSetting(\"savedFavorites\", savedFavorites);\r\n  }\r\n}\r\n\r\n// Load saved favorites onload\r\nfunction loadSavedFavorites() {\r\n  var savedItems = [];\r\n    var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n    if(savedFavorites !== null){\r\n    savedItems = savedFavorites;\r\n    savedItems.forEach(function(item) {\r\n      addFavorite(item.title, item.url, item.bgImg);\r\n    });\r\n    }\r\n}\r\n\r\nfunction loadPopularFavorites() {\r\n  var popFavs = getPopularFavorites();\r\n  popFavs.then(function(res) {\r\n    var response = JSON.parse(res);\r\n    createPopularFavs(response);\r\n  });\r\n}\r\nfunction loadDefaultFavorites() {\r\n  var popFavs = getPromise(\"/newtab/defaultFavs.json\");\r\n  popFavs.then(function(res) {\r\n    var response = JSON.parse(res);\r\n    createDefaultFavs(response);\r\n  });\r\n}\r\n\r\nfunction createDefaultFavs(favorites) {\r\n  var list = favorites.default_favorites;\r\n  // console.log(list);\r\n  for(var i = 0; i < list.length; i++){\r\n    var entry = {\r\n      \"title\" : list[i].title,\r\n      \"url\" : list[i].url,\r\n      \"bgImg\" : list[i].bgImg,\r\n    };\r\n    // console.log(entry);\r\n    saveFavorite(entry);\r\n  }\r\n}\r\n\r\nfunction createPopularFavs(favorites) {\r\n  var list = favorites.popular_favorites;\r\n  var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  var match = [];\r\n  //console.log(NTInstance);\r\n  for(var i = 0; i < list.length; i++){\r\n    if(savedFavorites !== null){\r\n    match = $.grep(savedFavorites, function(e) {\r\n      return e.url === list[i].url;\r\n    });\r\n    }\r\n    // var popularFav = {\r\n    //   \"title\" : list[i].title,\r\n    //   \"url\" : list[i].url,\r\n    //   \"bgImg\" : list[i].bgImg\r\n    // };\r\n\r\n    if(match.length === 0){\r\n      var favHTML = \"<a href='#' class='popFav' data-title=\" + list[i].title + \" data-url=\" + list[i].url + \" data-imgurl=\" + list[i].bgImg +\">\" + list[i].title + \"</a>\";\r\n      $(\".popularFavs\").append(favHTML);\r\n    }\r\n  }\r\n}\r\n\r\n// Prompt user for image to use for bookmark\r\n// and also the url.  Append to favorites\r\nfunction triggerModal(modal) {\r\n  $('.lightbox').fadeIn();\r\n  modal.fadeIn();\r\n}\r\n\r\nfunction closeModal(modal) {\r\n  $('.lightbox').fadeOut();\r\n  modal.fadeOut();\r\n}\r\n// Add a new favorite to the favorites grid\r\nfunction addFavorite(title, url, imageUrl) {\r\n  var newListEntry = document.createElement(\"LI\");\r\n  var newFavorite = document.createElement(\"A\");\r\n  newFavorite.href = url;\r\n  // console.log(imageExists(imageUrl));\r\n  $.get(imageUrl)\r\n    .done(function() {\r\n      newFavorite.style.backgroundImage = \"url(\" + imageUrl + \")\";\r\n    }).fail(function() {\r\n      newFavorite.style.backgroundImage = \"url('/newtab/images/placeholder.png')\";\r\n  });\r\n  newFavorite.style.backgroundSize = \"cover\";\r\n  newFavorite.style.backgroundPosition = \"center center\";\r\n  newFavorite.style.backgroundRepeat = \"no-repeat\";\r\n  newFavorite.classList.add(\"favorite\", NTInstance.currentSettings.hover);\r\n  newFavorite.dataset.title = title;\r\n  newFavorite.dataset.bgImg = imageUrl;\r\n  var optDel = document.createElement(\"I\");\r\n  optDel.classList.add(\"fa\", \"fa-trash-o\", \"fa-lg\", \"fa-fw\", \"optDel\");\r\n  // var optEdit = document.createElement(\"I\");\r\n  // optEdit.classList.add(\"fa\", \"fa-pencil\", \"fa-lg\", \"fa-fw\", \"optEdit\");\r\n  newFavorite.appendChild(optDel);\r\n  // newFavorite.appendChild(optEdit);\r\n  newListEntry.appendChild(newFavorite);\r\n  $(\"#favorites\").append(newListEntry);\r\n  $(\".favorite\").children().hide();\r\n}\r\n\r\n\r\n// Save favorite to local storage\r\nfunction saveFavorite(entry) {\r\n  var currentSaved = [];\r\n  var savedFavorites = NTInstance.getSetting(\"savedFavorites\", null);\r\n  if(savedFavorites !== null){\r\n    currentSaved = savedFavorites;\r\n  }\r\n  currentSaved.push(entry);\r\n  NTInstance.setSetting(\"savedFavorites\" , currentSaved);\r\n  addFavorite(entry.title, entry.url, entry.bgImg);\r\n  $(\"#inputUrl\").val(\"\");\r\n  $(\"#inputImage\").val(\"\");\r\n}\r\n\r\nfunction getPopularFavorites() {\r\n  return $.ajax({\r\n    url: \"./popularFavs.json\",\r\n    method: \"GET\"\r\n  });\r\n}\r\nfunction getPromise(url) {\r\n  return $.ajax({\r\n    url: url,\r\n    method: \"GET\"\r\n  });\r\n}\r\nfunction triggerEditMode() {\r\n  $(\"#favorites\").sortable(\"enable\");\r\n}\r\n\r\nfunction processEditedList() {\r\n  var reorderedList = $(\"#favorites\").children();\r\n  var processedList = [];\r\n  for (var i = 0; i < reorderedList.length; i++) {\r\n    var newEntry = {\r\n      \"title\": reorderedList[i].childNodes[0].dataset.title,\r\n      \"url\": reorderedList[i].childNodes[0].href,\r\n      \"bgImg\": reorderedList[i].childNodes[0].dataset.bgImg\r\n    };\r\n    processedList.push(newEntry);\r\n  }\r\n  NTInstance.setSetting(\"savedFavorites\", processedList);\r\n  $(\"#favorites\").sortable(\"disable\");\r\n\r\n}\r\n\r\nfunction validateURL(url) {\r\n  // var regex = \"\";\r\n  // console.log(typeof regex, url.match(regex));\r\n  if(url.match(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/) === null){\r\n    return false;\r\n  }\r\n  else return true;\r\n}\r\n\r\nfunction addHttp(url) {\r\n  var newUrl;\r\n  if(url.match(/^(https?:\\/\\/)/) === null){\r\n    var addHttp = \"http://\";\r\n    newUrl = addHttp.concat(url);\r\n    return newUrl;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\nfunction loadUserSettings() {\r\n  var userTheme = NTInstance.getSetting(\"userTheme\", \"light\");\r\n  var userFont = NTInstance.getSetting(\"userFont\", \"Work Sans\");\r\n  var userHover = NTInstance.getSetting(\"userHover\", \"hoverPop\");\r\n  var userBGImg = NTInstance.getSetting(\"userThemeBG\", null);\r\n  NTInstance.currentSettings = {\r\n    \"theme\" : userTheme,\r\n    \"font\" : userFont,\r\n    \"hover\" : userHover,\r\n    \"background\" : userBGImg\r\n  };\r\n  // console.log(NTInstance.currentSettings);\r\n}\r\nfunction setUserSettings(settings) {\r\n  if (settings.theme == 'light') {\r\n    $(\"body, .modal\").css(\"background\", \"white\");\r\n    $(\"*\").not(\".addBtn, .settingsBtn, .bgURLError, .currentDay span\").css(\"color\", \"black\");\r\n    $(\".favorite\").css(\"border\", \"1.5px solid black\");\r\n    $(\".favorite i, .popFav\").css(\"color\", \"white\");\r\n  }\r\n  else if (settings.theme == 'dark') {\r\n    $(\"body, .modal\").css(\"background\", \"#3c3c3c\");\r\n    $(\"*\").not(\".bgURLError\").css(\"color\", \"white\");\r\n    $(\"input, select, option\").css(\"color\", \"black\");\r\n    $(\".favorite\").css(\"border\", \"1.5px solid #d4d6e9\");\r\n  }\r\n  $(\"*\").not(\"i\").css(\"font-family\", settings.font);\r\n  $(\"select.fontOption\").val(settings.font);\r\n  $(\"select.hoverOption\").val(settings.hover);\r\n  var radios = $(\"input[name=theme-select]\");\r\n  $(radios).each(function(i, el) {\r\n    if($(el).val() === settings.theme)\r\n      $(el).attr(\"checked\", \"checked\");\r\n  });\r\n\r\n  if(settings.background !== null) {\r\n    $(\"body\").css(\"background-image\", \"url(\" + settings.background +\")\");\r\n    $(\"input[name=themeBGImage]\").val(settings.background);\r\n  }\r\n\r\n}\r\n// TO-DO: Could probably be implemented better\r\nfunction showInitialLoad() {\r\n  var $onboarding = $(\".onboardingModal\");\r\n  var temp = $onboarding.html();\r\n  $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/cubeload.svg'/><p class='onboardGreeting'>Setting up DashTab</p>\");\r\n  setTimeout(function() {\r\n    $onboarding.children().fadeOut(\"slow\");\r\n  }, 3000);\r\n  setTimeout(function() {\r\n    $onboarding.html(\"<img class='onboardLoad' src='/newtab/images/logo.jpg'/ alt='Dashtab Logo'><p class='onboardGreeting'>Welcome to DashTab!</p>\");\r\n  }, 3500);\r\n  setTimeout(function() {\r\n    $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n    // $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n    // $(\".modalWrapper\").fadeOut(\"slow\");\r\n  }, 6000);\r\n  setTimeout(function() {\r\n    // $(\".onboardGreeting, .onboardLoad\").fadeOut(\"slow\");\r\n    $onboarding.html(temp).children(\".modalWrapper\").hide();\r\n    // $(\".modalWrapper\").fadeOut(\"slow\");\r\n  }, 6500);\r\n  setTimeout(function() {\r\n    $(\".modalWrapper\").fadeIn(\"slow\");\r\n    // $(\".onboardGreeting\").fadeOut(\"slow\");\r\n  }, 7000);\r\n}\r\n"],"sourceRoot":"/source/"}