"use strict";!function e(t,a,r){function o(i,s){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(n)return n(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[i]={exports:{}};t[i][0].call(c.exports,function(e){var a=t[i][1][e];return o(a?a:e)},c,c.exports,e,t,a,r)}return a[i].exports}for(var n="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,a){var r=function(e){$(".lightbox").fadeIn(),e.animate({right:"0px"},400,"swing")},o=function(e){$(".lightbox").fadeOut(),e.animate({right:"-400px"},300,"swing")},n=function(){$("#favorites").sortable("enable")},i=function(e){for(var t=$("#favorites").children(),a=[],r=0;r<t.length;r++){var o={title:t[r].childNodes[0].dataset.title,url:t[r].childNodes[0].href,bgImg:t[r].childNodes[0].dataset.bgImg};a.push(o)}e.setSetting("savedFavorites",a),$("#favorites").sortable("disable")},s=function(e){var t=e.getSetting("userTheme","light"),a=e.getSetting("userFont","Work Sans"),r=e.getSetting("userHover","hoverPop"),o=e.getSetting("userThemeBG",null),n=e.getSetting("userFaveSize","80"),i=e.getSetting("userBGStyle","repeat");e.currentSettings={theme:t,font:a,hover:r,background:o,faveSize:n,bgStyle:i}},l=function(e){var t=e.faveSize+"px "+(parseInt(e.faveSize)+40)+"px";"light"===e.theme?($("body, .modal").css("background","white"),$("*").not(".addBtn, .settingsBtn, .bgURLError, .currentDay span").css("color","black"),$(".favorite").css({border:"1.5px solid black",padding:t,transition:"0.3s transform, 0.3s margin"}),$(".favorite i, .popFav").css("color","white")):"dark"===e.theme?($("body, .modal").css("background","#3c3c3c"),$("*").not(".bgURLError").css("color","white"),$("input, select, option").css("color","black"),$(".favorite").css({border:"1.5px solid #d4d6e9",padding:t,transition:"0.3s transform, 0.3s margin"})):"fade"===e.theme&&($(".modal, .headerPanel").css("background","rgba(0,0,0,0.4)"),$("*").not(".bgURLError").css("color","white"),$("input, select, option").css("color","black"),$(".headerPanel").css("border","none"),$(".favorite").css({padding:t,transition:"0.3s transform, 0.3s margin"})),"cover"===e.bgStyle?$("body").css("background-size",e.bgStyle):($("body").css("background-repeat",e.bgStyle),$("body").css("background-size","auto")),$("*").not("i").css("font-family",e.font);var a=$("input[name=theme-select]");$(a).each(function(t,a){$(a).val()===e.theme&&$(a).attr("checked","checked")}),null!==e.background&&($("body").css("background-image","url("+e.background+")"),$("input[name=themeBGImage]").val(e.background)),$(".themeBGImageRepeat").val(e.bgStyle),$(".favoriteSize").val(e.faveSize),$("select.fontOption").val(e.font),$("select.hoverOption").val(e.hover)},d=function(){var e=$(".onboardingModal"),t=e.html();e.html("<img class='onboardLoad' src='/newtab/images/cubeload.svg'/><p class='onboardGreeting'>Setting up DashTab</p>"),setTimeout(function(){e.children().fadeOut("slow")},3e3),setTimeout(function(){e.html("<img class='onboardLoad' src='/newtab/images/logo.jpg'/ alt='Dashtab Logo'><p class='onboardGreeting'>Welcome to DashTab!</p>")},3500),setTimeout(function(){$(".onboardGreeting, .onboardLoad").fadeOut("slow")},6e3),setTimeout(function(){e.html(t).children(".modalWrapper").hide()},6500),setTimeout(function(){$(".modalWrapper").fadeIn("slow")},7e3)},c=function(e,t){var a=e;t.setSetting("userFont",a),$("*").not("i").css("font-family",a)},u=function(e,t){switch(t.setSetting("userHover",e),e){case"hoverPop":$(".favorite").addClass("hoverPop").removeClass("hoverNone hoverHighlight");break;case"hoverHighlight":$(".favorite").addClass("hoverHighlight").removeClass("hoverNone hoverPop");break;case"hoverNone":$(".favorite").addClass("hoverNone").removeClass("hoverPop hoverHighlight")}},g=function(e,t){t.setSetting("userFaveSize",e);var a=e+"px "+(parseInt(e)+40)+"px";$(".favorite").css({padding:a,transition:"0.4s padding, 0.3s transform, 0.3s margin"})},v=function(e,t){t.setSetting("userBGStyle",e),"cover"===e?$("body").css("background-size",e):($("body").css("background-repeat",e),$("body").css("background-size","auto"))};t.exports={triggerModal:r,closeModal:o,triggerEditMode:n,processEditedList:i,loadUserSettings:s,setUserSettings:l,showInitialLoad:d,setFont:c,setHover:u,setSize:g,setBGStyle:v}},{}],2:[function(e,t,a){function r(){for(var e=0;6>=e;e++){var t=document.createElement("td"),a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];t.innerHTML=a[e],m.appendChild(t)}for(p.appendChild(m),m=document.createElement("tr"),e=0;6>=e&&e!==v;e++){var t=document.createElement("td");t.innerHTML="",m.appendChild(t)}for(var r=1;6>=e;e++){var t=document.createElement("td");t.innerHTML="<span>"+r+"</span>",r===l&&t.classList.add("currentDay"),r++,m.appendChild(t)}p.appendChild(m);for(var o=3;6>=o;o++){m=document.createElement("tr");for(var e=0;7>=e;e++){if(r>h)return p.appendChild(m),p;var t=document.createElement("td");t.innerHTML="<span>"+r+"</span>",r===l&&t.classList.add("currentDay"),r++,m.appendChild(t)}p.appendChild(m)}}var o=new Date,n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=o.getMonth(),s=o.getFullYear(),l=o.getDate(),d=n[i]+" 1 "+s,c=new Date(d).toDateString(),u=c.substring(0,3),g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v=g.indexOf(u),h=new Date(s,i+1,0).getDate(),p=document.createElement("table"),f=void 0,m=document.createElement("tr");f=r(),t.exports={theCalendar:f,month_name:n,month:i,year:s}},{}],3:[function(e,t,a){var r=e("./util.js"),o=function(e,t,a,r){var o=document.createElement("LI"),n=document.createElement("A");n.href=t,$.get(a).done(function(){n.style.backgroundImage="url("+a+")"}).fail(function(){n.style.backgroundImage="url('/newtab/images/placeholder.png')"}),n.style.backgroundSize="cover",n.style.backgroundPosition="center center",n.style.backgroundRepeat="no-repeat",n.classList.add("favorite",r.currentSettings.hover),n.dataset.title=e,n.dataset.bgImg=a;var i=document.createElement("I");i.classList.add("fa","fa-trash-o","fa-lg","fa-fw","optDel"),n.appendChild(i),o.appendChild(n),$("#favorites").append(o),$(".favorite").children().hide()},n=function(e,t){var a=[],r=t.getSetting("savedFavorites",null);null!==r&&(a=r),a.push(e),t.setSetting("savedFavorites",a),o(e.title,e.url,e.bgImg,t),$("#inputUrl").val(""),$("#inputImage").val("")},i=function(){return $.ajax({url:"./popularFavs.json",method:"GET"})},s=function(e,t){var a=t.getSetting("savedFavorites",null);null!==a&&(a.forEach(function(t,r){t.url===e&&a.splice(r,1)}),t.setSetting("savedFavorites",a))},l=function(e){var t=[],a=e.getSetting("savedFavorites",null);null!==a&&(t=a,t.forEach(function(t){o(t.title,t.url,t.bgImg,e)}))},d=function(e){var t=i();t.then(function(t){var a=JSON.parse(t);g(a,e)})},c=function(e){var t=r.getPromise("/newtab/defaultFavs.json");t.then(function(t){var a=JSON.parse(t);u(a,e)})},u=function(e,t){for(var a=e.default_favorites,r=0;r<a.length;r++){var o={title:a[r].title,url:a[r].url,bgImg:a[r].bgImg};n(o,t)}},g=function(e,t){for(var a=e.popular_favorites,r=t.getSetting("savedFavorites",null),o=[],n=0;n<a.length;n++)if(null!==r&&(o=$.grep(r,function(e){return e.url===a[n].url})),0===o.length){var i="<a href='#' class='popFav' data-title="+a[n].title+" data-url="+a[n].url+" data-imgurl="+a[n].bgImg+">"+a[n].title+"</a>";$(".popularFavs").append(i)}};t.exports={addFavorite:o,saveFavorite:n,getPopularFavorites:i,deleteFavorite:s,loadSavedFavorites:l,loadPopularFavorites:d,loadDefaultFavorites:c,createDefaultFavs:u,createPopularFavs:g}},{"./util.js":5}],4:[function(e,t,a){var r=chrome.extension.getBackgroundPage(),o=r.NTInstance;o.editing=!1,o.currentSettings={theme:"light",font:"Work Sans",hover:"hoverPop",background:null,faveSize:"80"},chrome.storage.local.get(function(e){console.log(e)}),console.log(o.getSetting("savedFavorites"));var n=e("./actions.js"),i=e("./createCalendar.js"),s=e("./favorites.js"),l=e("./util.js");$(document).ready(function(){n.loadUserSettings(o),s.loadSavedFavorites(o),s.loadPopularFavorites(o),n.setUserSettings(o.currentSettings);var e=i.theCalendar;console.log(i),$(".calendar-head").html("<span>"+i.month_name[i.month]+" "+i.year+"</span"),$(".calendar").append(e),$("#favorites").sortable(),$("#favorites").sortable("disable"),chrome.runtime.sendMessage({task:"checkFirstRun"},function(e){e.firstRun&&(n.showInitialLoad(),s.loadDefaultFavorites(o),n.triggerModal($(".onboardingModal")),$("#obInputTitle").focus()),$(".favorite").children().hide()});var t=(new Date).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});$("#time").html(t);var a=(new Date).toDateString();$("#date").html(a),setInterval(function(){t=(new Date).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}),$("#time").html(t)},1e3),$(document).on("click",".userAction",function(e){e.preventDefault();var t=$(this).attr("id");switch(t){case"addFavorite":0===$(".addModal .popularFavs").children().length&&$(".addExtra").hide();var a=$(".addModal");n.triggerModal(a),$("#inputTitle").focus();break;case"editMode":e.preventDefault(),o.editing=!o.editing,$(".favorite").toggleClass("editing"),$(".favorite").children().toggle(),o.editing?n.triggerEditMode():n.processEditedList(o);break;case"openSettings":e.preventDefault();var r=$(".settingsModal");n.triggerModal(r);break;case"openOnboarding":e.preventDefault();var i=$(".onboardingModal");n.triggerModal(i);break;case"openCalendar":e.preventDefault();var s=$(".calendarModal");n.triggerModal(s)}}),$(document).on("click",".popFav",function(e){e.preventDefault();var t=$(this)[0],a=t.dataset.title,r=t.dataset.url,n=t.dataset.imgurl,i={title:a,url:r,bgImg:n};s.saveFavorite(i,o),$(this).remove(),0!==$(".addModal .popularFavs").children().length&&0!==$(".onboardingModal .popularFavs").children().length||$(".addExtra, .popularFavs").hide()}),$(document).on("click",".closeBtn",function(e){e.preventDefault();var t=$(this).closest(".modal");n.closeModal(t)}),$(document).on("click",".addBtn",function(e){e.preventDefault();var t=$("#inputTitle").val(),a=$("#inputUrl").val();a=l.addHttp(a);var r=l.validateURL(a);r||($(".addFormError").css("color","red"),$(".addFormError").text("Please enter a valid URL").show());var i=$("#inputImage").val();i=l.addHttp(i);var d=l.validateURL(i);if(d||$(".addFormError").text("Please enter a valid Image URL").show(),r||d||$(".addFormError").text("Please enter a valid URL & Image URL").show(),""!==t&&""!==a&&r&&""!==i&&d){var c={title:t,url:a,bgImg:i};s.saveFavorite(c,o),null!==$(".modal").length&&n.closeModal($(".modal")),$(".addFormError").hide()}else $(".addFormError").show()}),$(document).on("click",".updateBtn",function(){var e=$("input[name=themeBGImage]").val(),t=l.validateURL(e);t?(o.setSetting("userThemeBG",e),$("body").css("background-image","url('"+e+"')")):$(".bgURLError").show()}),$(document).on("click",".removeBtn",function(){$("input[name=themeBGImage]").val(""),o.setSetting("userThemeBG",null),$("body").css("background-image","none"),$(".bgURLError").hide()}),$("input[type=radio][name=theme-select]").change(function(){o.setSetting("userTheme",this.value),"light"===this.value?($("body, .modal").css("background","white"),$("*").not(".addBtn, .settingsBtn, .bgURLError, .currentDay span, .addFormError").css("color","black"),$(".favorite").css("border","1.5px solid black"),$(".favorite i, .popFav").css("color","white")):"dark"===this.value?($("body, .modal").css("background","#3c3c3c"),$("*").not(".bgURLError").css("color","white"),$("input, select, option").css("color","black"),$(".favorite").css("border","1.5px solid #d4d6e9")):"fade"===this.value&&($(".modal, .headerPanel").css("background","rgba(0,0,0,0.4)"),$("*").not(".bgURLError").css("color","white"),$("input, select, option").css("color","black"),$(".headerPanel").css("border","none"))}),$(document).on("change",".hoverOption",function(){var e=$(this).val();n.setHover(e,o)}),$(document).on("change",".fontOption",function(){var e=$(this).val();n.setFont(e,o)}),$(document).on("change",".favoriteSize",function(){var e=$(this).val();n.setSize(e,o)}),$(document).on("change",".themeBGImageRepeat",function(){var e=$(this).val();n.setBGStyle(e,o)}),$(document).on("click",".optDel",function(e){e.preventDefault();var t=$(this).parent(),a=t.attr("href");s.deleteFavorite(a,o),$(this).parent().remove()}),$(document).on("click",".favorite",function(e){$(this).hasClass("editing")&&e.preventDefault()})})},{"./actions.js":1,"./createCalendar.js":2,"./favorites.js":3,"./util.js":5}],5:[function(e,t,a){var r=function(e){return $.ajax({url:e,method:"GET"})},o=function(e){return null!==e.match(/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/)},n=function i(e){var t;if(null===e.match(/^(https?:\/\/)/)){var i="http://";return t=i.concat(e)}return e};t.exports={getPromise:r,validateURL:o,addHttp:n}},{}]},{},[4]);
//# sourceMappingURL=newtab.js.map
